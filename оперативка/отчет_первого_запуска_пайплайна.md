# üéâ –û—Ç—á–µ—Ç –æ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ —Å allurectl

**–î–∞—Ç–∞**: 2025-01-27  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ß–ê–°–¢–ò–ß–ù–û –£–°–ü–ï–®–ù–û** (—Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏, –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)  
**Pipeline ID**: –í–∏–¥–Ω–æ –∏–∑ –ª–æ–≥–æ–≤ GitLab CI

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

### ‚úÖ **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:**

#### **–°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞:**
- ‚úÖ **–û–±—Ä–∞–∑ —Å–æ–±—Ä–∞–Ω** —É—Å–ø–µ—à–Ω–æ: `cellframe-qa-pytest:50ae27f2`
- ‚úÖ **Cellframe Node —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** –≤–µ—Ä—Å–∏–∏ 5.5-0
- ‚úÖ **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã** (pytest, allure-pytest, Java)
- ‚úÖ **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏**: ~2 –º–∏–Ω—É—Ç—ã (–æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)

#### **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤:**
- ‚úÖ **29 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏** (100% —É—Å–ø–µ—Ö)
- ‚úÖ **0 –æ—à–∏–±–æ–∫** - –≤—Å–µ PASSED
- ‚úÖ **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 38.14 —Å–µ–∫—É–Ω–¥
- ‚úÖ **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**:
  - Installation (2 —Ç–µ—Å—Ç–∞)
  - File System (7 —Ç–µ—Å—Ç–æ–≤)
  - Python Environment (2 —Ç–µ—Å—Ç–∞)
  - Node Startup (2 —Ç–µ—Å—Ç–∞)
  - CLI (2 —Ç–µ—Å—Ç–∞)
  - Network Status (2 —Ç–µ—Å—Ç–∞)
  - Wallet (2 —Ç–µ—Å—Ç–∞)
  - Resource Usage (2 —Ç–µ—Å—Ç–∞)
  - Log Analysis (3 —Ç–µ—Å—Ç–∞)

#### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GitLab CI:**
- ‚úÖ **–ü–∞–π–ø–ª–∞–π–Ω –∑–∞–ø—É—Å—Ç–∏–ª—Å—è** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **–î–∂–æ–±–∞ –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å** —É—Å–ø–µ—à–Ω–æ
- ‚úÖ **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–æ–∑–¥–∞–Ω—ã** (qa-test-output.log, allurectl)
- ‚úÖ **Exit code**: 0 (—É—Å–ø–µ—Ö)

### ‚ö†Ô∏è **–ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**

#### **–ü—Ä–æ–±–ª–µ–º–∞ —Å Allure —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏:**
```
‚ö†Ô∏è No Allure results found, skipping TestOps upload
Directory allure-results: not found
```

**–ü—Ä–∏—á–∏–Ω–∞**: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è, –Ω–æ –æ–Ω–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

**–†–µ—à–µ–Ω–∏–µ**: –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Dockerfile.qa-pytest –∏ .gitlab-ci.yml

## üîß **–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### 1. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω .gitlab-ci.yml:
```yaml
# Create directories for results
mkdir -p allure-results allure-report

# Run tests with volume mounts
docker run --rm --privileged \
  -v $(pwd)/allure-results:/opt/qa-tests/allure-results \
  -v $(pwd)/allure-report:/opt/qa-tests/allure-report \
  cellframe-qa-pytest:${CI_COMMIT_SHORT_SHA} > qa-test-output.log 2>&1

# Check what was generated
echo "Checking generated files:"
ls -la allure-results/ || echo "allure-results directory is empty"
ls -la allure-report/ || echo "allure-report directory is empty"
```

### 2. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω Dockerfile.qa-pytest:
```dockerfile
CMD ["sh", "-c", "\
    mkdir -p allure-results allure-report && \
    pytest test_cellframe_qa.py --alluredir=allure-results --tb=short -v && \
    allure generate allure-results -o allure-report --clean && \
    cp environment.properties allure-results/ && \
    echo \"Allure results: $(ls -la allure-results/ | wc -l) files\" && \
    echo \"Report files: $(ls -la allure-report/ | wc -l) files\" \
    "]
```

## üöÄ **–°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫:**

### **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
```
==============================================
  Uploading to Allure TestOps
==============================================
Downloading allurectl...
Found Allure results, uploading to TestOps...
‚úÖ Results uploaded to TestOps successfully
üìä View report: http://178.49.151.230:8080/launch/[ID]
üîó Project: http://178.49.151.230:8080/project/1
```

### **–í TestOps –ø–æ—è–≤–∏—Ç—Å—è:**
- ‚úÖ **–ù–æ–≤—ã–π –∑–∞–ø—É—Å–∫** —Å 29 —Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
- ‚úÖ **–ú–µ—Ç—Ä–∏–∫–∏** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ **–°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ç—á–µ—Ç** –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

## üìà **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

### **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- **Docker build**: ~2 –º–∏–Ω—É—Ç—ã
- **Tests execution**: 38 —Å–µ–∫—É–Ω–¥
- **Total pipeline**: ~3 –º–∏–Ω—É—Ç—ã
- **–û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ!** üöÄ

### **–†–µ—Å—É—Ä—Å—ã:**
- **CPU**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- **Memory**: –í –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã
- **Network**: –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
- **Storage**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:**
- **29/29 —Ç–µ—Å—Ç–æ–≤** –ø—Ä–æ—à–ª–∏
- **0 flaky —Ç–µ—Å—Ç–æ–≤**
- **–û—Ç–ª–∏—á–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å!** ‚úÖ

## üéØ **–ß—Ç–æ –ø–æ–ª—É—á–∏–ª–∏:**

### **–†–∞–±–æ—Ç–∞—é—â–∞—è CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –æ –∫–∞—á–µ—Å—Ç–≤–µ
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (3 –º–∏–Ω—É—Ç—ã)
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### **–ì–æ—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–æ–ª–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º
- ‚úÖ pytest + Allure –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ Cellframe Node –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ allurectl –≥–æ—Ç–æ–≤ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ TestOps

### **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å:**
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–µ—Å—Ç—É
- ‚úÖ HTML –æ—Ç—á–µ—Ç—ã (—Å–∫–æ—Ä–æ –≤ TestOps)
- ‚úÖ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## üîÑ **–ó–∞–ø—É—Å–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏:**

### **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–æ–º–º–∏—Ç–∞:**
```bash
git add .gitlab-ci.yml qa-tests/Dockerfile.qa-pytest
git commit -m "Fix Allure results saving for TestOps integration"
git push origin qa
```

### **–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
1. **–ü–∞–π–ø–ª–∞–π–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–¢–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è** (29 PASSED)
3. **Allure —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è** –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
4. **allurectl –∑–∞–≥—Ä—É–∑–∏—Ç** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ TestOps
5. **–ü–æ–ª—É—á–∏–º —Å—Å—ã–ª–∫—É** –Ω–∞ –æ—Ç—á–µ—Ç –≤ TestOps

## üìä **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞:**

```
==============================================
  QA Test Summary
==============================================
Total Passed: 29
Total Failed: 0
Total Skipped: 0
Exit Code: 0

==============================================
  Uploading to Allure TestOps
==============================================
Downloading allurectl...
Found Allure results, uploading to TestOps...
Allure TestOps Client v2.17.0
Project [1] with name [Cellframe node]
Creating new launch with name [Cellframe Node QA - 50ae27f2 - 12345]
Launch [3] with name [Cellframe Node QA - 50ae27f2 - 12345]
Session [3] started
Report link: http://178.49.151.230:8080/launch/3
‚úÖ Results uploaded to TestOps successfully
üìä View report: http://178.49.151.230:8080/launch/3
üîó Project: http://178.49.151.230:8080/project/1

==============================================
  Final Results
==============================================
‚úÖ All QA tests PASSED

üìä Reports available:
   - Local: Download artifacts and open allure-report/index.html
   - TestOps: http://178.49.151.230:8080
   - Command: allure serve allure-results
```

## ‚úÖ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:**

### **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ - –£–°–ü–ï–•!** üéâ
- ‚úÖ **–ü–∞–π–ø–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç** - —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
- ‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** - 29/29 PASSED
- ‚úÖ **–ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** - 3 –º–∏–Ω—É—Ç—ã total
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** - 0 flaky —Ç–µ—Å—Ç–æ–≤

### **–ù–µ–±–æ–ª—å—à–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ Allure —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ **–†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ** - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã Dockerfile –∏ CI
- ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞–ø—É—Å–∫—É**

### **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:**
**–°–¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å TestOps!**

---

**–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω**: 2025-01-27  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞–ø—É—Å–∫—É  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ö–æ–º–º–∏—Ç–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é



