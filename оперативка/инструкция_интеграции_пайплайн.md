# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ allurectl –≤ GitLab CI –ø–∞–π–ø–ª–∞–π–Ω

**–î–∞—Ç–∞**: 2025-01-27  
**–¶–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å allurectl –≤ –¥–∂–æ–±—É qa_functional_tests –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ TestOps

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ó–∞–º–µ–Ω–∏—Ç—å –¥–∂–æ–±—É –≤ .gitlab-ci.yml

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª** `.gitlab-ci.yml`
2. **–ù–∞–π–¥–∏—Ç–µ –¥–∂–æ–±—É** `qa_functional_tests` (—Å—Ç—Ä–æ–∫–∏ 142-225)
3. **–ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å—é –¥–∂–æ–±—É** –Ω–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `–æ–ø–µ—Ä–∞—Ç–∏–≤–∫–∞/qa_functional_tests_with_allurectl.yml`

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ GitLab CI –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `ALLURE_ENDPOINT`: `http://178.49.151.230:8080`
- `ALLURE_TOKEN`: `YOUR_ALLURE_TOKEN_HERE`
- `ALLURE_PROJECT_ID`: `1`

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç

1. **–°–¥–µ–ª–∞–π—Ç–µ –∫–æ–º–º–∏—Ç** —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞–π–ø–ª–∞–π–Ω** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∂–æ–±—É** `qa_functional_tests`

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ:
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ TestOps** - endpoint, token, project ID
- **–ó–∞–≥—Ä—É–∑–∫–∞ allurectl** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - –≤ TestOps –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å** - —Å—Å—ã–ª–∫–∏ –Ω–∞ TestOps
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - graceful fallback

### üîß –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ:
- **–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TestOps
- **–í—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–π** - —É–ª—É—á—à–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã** - –¥–æ–±–∞–≤–ª–µ–Ω allurectl –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** - –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- ‚úÖ **TestOps –æ—Ç—á–µ—Ç—ã** - –Ω–æ–≤—ã–µ, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞** - –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ
- ‚úÖ **–ö–æ–º–∞–Ω–¥–Ω—ã–π –¥–æ—Å—Ç—É–ø** - —á–µ—Ä–µ–∑ TestOps

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –í GitLab CI:
```
==============================================
  QA Testing with Allure Report + TestOps
  Framework: pytest + allure-pytest
  TestOps: http://178.49.151.230:8080
  Project: Cellframe Node QA
==============================================

Building QA Docker image...
Running professional QA tests with pytest...

==============================================
  QA Test Summary
==============================================
Total Passed: 25
Total Failed: 0
Total Skipped: 4
Exit Code: 0

==============================================
  Uploading to Allure TestOps
==============================================
Downloading allurectl...
Found Allure results, uploading to TestOps...
‚úÖ Results uploaded to TestOps successfully
üìä View report: http://178.49.151.230:8080/launch/[ID]
üîó Project: http://178.49.151.230:8080/project/1

==============================================
  Final Results
==============================================
‚úÖ All QA tests PASSED

üìä Reports available:
   - Local: Download artifacts and open allure-report/index.html
   - TestOps: http://178.49.151.230:8080
   - Command: allure serve allure-results

üéØ Next steps:
   - Check TestOps dashboard for detailed analytics
   - Review test trends and metrics
   - Set up notifications for future runs
```

### –í TestOps:
- ‚úÖ **–ù–æ–≤—ã–π –∑–∞–ø—É—Å–∫** —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º "Cellframe Node QA - [commit] - [pipeline]"
- ‚úÖ **–¢–µ–≥–∏**: cellframe, node, qa, ci, gitlab
- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤** - –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ **–°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ç—á–µ—Ç** - –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ GitLab

### –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ** –≤ Settings ‚Üí CI/CD ‚Üí Variables
2. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
   - `ALLURE_ENDPOINT` = `http://178.49.151.230:8080`
   - `ALLURE_TOKEN` = `YOUR_ALLURE_TOKEN_HERE`
   - `ALLURE_PROJECT_ID` = `1`
3. **–ü–æ–º–µ—Ç—å—Ç–µ –∫–∞–∫ Protected** (–¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
4. **–ü–æ–º–µ—Ç—å—Ç–µ –∫–∞–∫ Masked** (—Å–∫—Ä—ã—Ç—å –≤ –ª–æ–≥–∞—Ö)

### –ß–µ—Ä–µ–∑ API:
```bash
curl --request POST \
  --header "PRIVATE-TOKEN: your-gitlab-token" \
  --form "key=ALLURE_ENDPOINT" \
  --form "value=http://178.49.151.230:8080" \
  --form "protected=true" \
  --form "masked=true" \
  "https://gitlab.demlabs.net/api/v4/projects/PROJECT_ID/variables"
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç:
```bash
cd qa-tests
source allurectl.env.production
./run-tests-with-allurectl.sh
```

### 2. –¢–µ—Å—Ç –≤ GitLab CI:
1. **–°–¥–µ–ª–∞–π—Ç–µ –∫–æ–º–º–∏—Ç** –≤ qa –≤–µ—Ç–∫—É
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–π–ø–ª–∞–π–Ω** - –¥–∂–æ–±–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏** - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ TestOps

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ TestOps:
1. **–ó–∞–π–¥–∏—Ç–µ** –≤ http://178.49.151.230:8080
2. **–ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç** "Cellframe node"
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—É—Å–∫–∏** - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤—ã–µ

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Failed to upload to TestOps"
**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ TestOps –¥–æ—Å—Ç—É–ø–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "No Allure results found"
**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ allure-results

### –ü—Ä–æ–±–ª–µ–º–∞: "allurectl: command not found"
**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É allurectl
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –í GitLab CI:
- ‚úÖ **–õ–æ–≥–∏ –¥–∂–æ–±—ã** - —Å—Ç–∞—Ç—É—Å –æ—Ç–ø—Ä–∞–≤–∫–∏
- ‚úÖ **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã** - –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- ‚úÖ **Exit code** - —É—Å–ø–µ—Ö/–Ω–µ—É–¥–∞—á–∞

### –í TestOps:
- ‚úÖ **–î–∞—à–±–æ—Ä–¥—ã** - –æ–±–∑–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ **–ó–∞–ø—É—Å–∫–∏** - –∏—Å—Ç–æ—Ä–∏—è —Ç–µ—Å—Ç–æ–≤
- ‚úÖ **–ú–µ—Ç—Ä–∏–∫–∏** - —Ç—Ä–µ–Ω–¥—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ **–ê–ª–µ—Ä—Ç—ã** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤ (10 –º–∏–Ω—É—Ç):
- –°–æ–∑–¥–∞–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã –≤ TestOps
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–∏–¥–∂–µ—Ç—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- –î–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–µ–≥–∞–º

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (15 –º–∏–Ω—É—Ç):
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å Slack/Telegram
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø–∞–¥–∞—é—â–∏—Ö —Ç–µ—Å—Ç–∞—Ö
- –î–æ–±–∞–≤—å—Ç–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

### 3. –ö–æ–º–∞–Ω–¥–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ (30 –º–∏–Ω—É—Ç):
- –ü–æ–∫–∞–∂–∏—Ç–µ TestOps –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–µ
- –û–±—ä—è—Å–Ω–∏—Ç–µ –∫–∞–∫ —á–∏—Ç–∞—Ç—å –æ—Ç—á–µ—Ç—ã
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:
- [ ] –§–∞–π–ª `.gitlab-ci.yml` –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ TestOps –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –ø—Ä–æ—à–µ–ª
- [ ] GitLab CI –¥–∂–æ–±–∞ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—è–≤–∏–ª–∏—Å—å –≤ TestOps

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:
- [ ] –î–∞—à–±–æ—Ä–¥—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ö–æ–º–∞–Ω–¥–∞ –æ–±—É—á–µ–Ω–∞

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤:
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã** –≤ TestOps –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å** –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**

**–ù–∞—á–Ω–∏—Ç–µ —Å –∑–∞–º–µ–Ω—ã –¥–∂–æ–±—ã –≤ .gitlab-ci.yml!** üéØ

---

**–°–æ–∑–¥–∞–Ω–æ**: 2025-01-27  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Ready for integration  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ó–∞–º–µ–Ω–∏—Ç—å –¥–∂–æ–±—É –≤ .gitlab-ci.yml




