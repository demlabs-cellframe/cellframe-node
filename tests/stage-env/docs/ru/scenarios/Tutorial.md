# –£—á–µ–±–Ω–∏–∫ –ø–æ —Ç–µ—Å—Ç–æ–≤—ã–º —Å—Ü–µ–Ω–∞—Ä–∏—è–º

**–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã—Ö E2E —Ç–µ—Å—Ç–æ–≤ –¥–ª—è Cellframe Node**

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –≠—Ç–æ—Ç —É—á–µ–±–Ω–∏–∫ –Ω–∞—É—á–∏—Ç –≤–∞—Å –ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—è YAML-based —è–∑—ã–∫ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤. –ó–Ω–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è.

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–£—Ä–æ–∫ 1: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç](#—É—Ä–æ–∫-1-–ø–µ—Ä–≤—ã–π-—Ç–µ—Å—Ç)
3. [–£—Ä–æ–∫ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ defaults](#—É—Ä–æ–∫-2-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-defaults)
4. [–£—Ä–æ–∫ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö](#—É—Ä–æ–∫-3-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–∏-–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö)
5. [–£—Ä–æ–∫ 4: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–æ–∫–µ–Ω–∞–º–∏](#—É—Ä–æ–∫-4-–æ–ø–µ—Ä–∞—Ü–∏–∏-—Å-—Ç–æ–∫–µ–Ω–∞–º–∏)
6. [–£—Ä–æ–∫ 5: –ù–∞–¥—ë–∂–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —Å wait_for_datum](#—É—Ä–æ–∫-5-–Ω–∞–¥—ë–∂–Ω–æ–µ-–æ–∂–∏–¥–∞–Ω–∏–µ-—Å-wait_for_datum)
7. [–£—Ä–æ–∫ 6: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ includes](#—É—Ä–æ–∫-6-–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤-—á–µ—Ä–µ–∑-includes)
8. [–£—Ä–æ–∫ 7: –¢–µ—Å—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã (suites)](#—É—Ä–æ–∫-7-—Ç–µ—Å—Ç–æ–≤—ã–µ-–Ω–∞–±–æ—Ä—ã-suites)
9. [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)

---

## –í–≤–µ–¥–µ–Ω–∏–µ

### –ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π?

–¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π - —ç—Ç–æ YAML —Ñ–∞–π–ª, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π:
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** - –∏–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ç–µ–≥–∏
- **–°–µ—Ç—å** - —Ç–æ–ø–æ–ª–æ–≥–∏—è (–æ–±—ã—á–Ω–æ –ø—Ä–æ—Å—Ç–æ `topology: default`)
- **Setup** - –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **Test** - –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- **Check** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä

```yaml
name: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
description: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ CLI –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É version

network:
  topology: default

test:
  - cli: version
    contains: "Cellframe"
```

–≠—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π:
1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—É—é —Ç–æ–ø–æ–ª–æ–≥–∏—é (3 root + 3 master + 1 full –Ω–æ–¥–∞)
2. –í—ã–ø–æ–ª–Ω—è–µ—Ç `cellframe-node-cli version` –Ω–∞ node1
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –≤—ã–≤–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç "Cellframe"

### –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å?

```bash
# –û–¥–∏–Ω —Å—Ü–µ–Ω–∞—Ä–∏–π
cd tests
./stage-env/stage-env run-tests e2e/my_test.yml

# –¶–µ–ª—ã–π suite
./stage-env/stage-env run-tests e2e/token/

# –ß–µ—Ä–µ–∑ run.sh (–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª)
./run.sh
```

---

## –£—Ä–æ–∫ 1: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç

**–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å –∫–æ—à–µ–ª—ë–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ.

**–†–µ—à–µ–Ω–∏–µ** (`lesson1_wallet.yml`):

```yaml
name: –£—Ä–æ–∫ 1 - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
description: –ò–∑—É—á–∞–µ–º –±–∞–∑–æ–≤—ã–µ CLI –∫–æ–º–∞–Ω–¥—ã
tags: [tutorial, lesson1, wallet]

# –ò—Å–ø–æ–ª—å–∑—É–µ–º default —Ç–æ–ø–æ–ª–æ–≥–∏—é (network –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'topology: default')
network:
  topology: default

test:
  # –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –∫–æ—à–µ–ª—ë–∫
  - cli: wallet new -w my_first_wallet
    node: node1         # –í—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ node1 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    expect: success     # –û–∂–∏–¥–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    wait: 1s            # –ü–æ–¥–æ–∂–¥–∞—Ç—å 1 —Å–µ–∫—É–Ω–¥—É –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã

  # –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–æ–∑–¥–∞–ª—Å—è
  - cli: wallet list
    contains: my_first_wallet
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. stage-env –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —á–∏—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ç–∏ –∏–∑ snapshot (~2s)
2. `wallet new` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `docker exec node1 cellframe-node-cli wallet new -w my_first_wallet`
3. –°–∏—Å—Ç–µ–º–∞ –∂–¥—ë—Ç 1 —Å–µ–∫—É–Ω–¥—É
4. `wallet list` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
5. –í—ã–≤–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ "my_first_wallet"

**üí° –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- `node: node1` - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –º–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å
- `expect: success` - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –º–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å
- `wait: 1s` - –¥–∞—ë—Ç –≤—Ä–µ–º—è –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

---

## –£—Ä–æ–∫ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ defaults

**–ó–∞–¥–∞—á–∞:** –£–º–µ–Ω—å—à–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ defaults.

**–ë–µ–∑ defaults:**

```yaml
test:
  - cli: token list
    node: node1
    wait: 3s
  
  - cli: wallet list
    node: node1
    wait: 3s
  
  - cli: version
    node: node1
    wait: 3s
```

**–° defaults:**

```yaml
# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ defaults - –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º —à–∞–≥–∞–º
defaults:
  node: node1
  wait: 3s

test:
  - cli: token list
  - cli: wallet list
  - cli: version
  
  # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —à–∞–≥–∞
  - cli: token info -name TEST
    wait: 10s    # –≠—Ç–æ—Ç —à–∞–≥ –∂–¥—ë—Ç 10s –≤–º–µ—Å—Ç–æ 3s
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–µ–Ω—å—à–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
- –ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –ü–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ

**–ò–µ—Ä–∞—Ä—Ö–∏—è defaults:**
1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ** (`defaults:` –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ)
2. **–°–µ–∫—Ü–∏–∏** (`setup:` / `test:` / `check:` –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Å–≤–æ–∏ defaults)
3. **–ì—Ä—É–ø–ø—ã** (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —à–∞–≥–æ–≤ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ defaults)
4. **–®–∞–≥** (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —à–∞–≥–∞ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –≤—Å—ë)

---

## –£—Ä–æ–∫ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–ó–∞–¥–∞—á–∞:** –ò–∑–≤–ª–µ—á—å –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–∞—Ö.

**–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å save_wallet:**

```yaml
name: –£—Ä–æ–∫ 3 - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
description: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–∞

network:
  topology: default

test:
  # –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –∫–æ—à–µ–ª—ë–∫
  - cli: wallet new -w test_wallet
  
  # –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
  - cli: wallet info -w test_wallet
    save_wallet: my_address
    # –û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞! –ê–≤—Ç–æ-–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è base58 + checksum
  
  # –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–π –∞–¥—Ä–µ—Å
  - cli: balance -addr {{my_address}}
    save: balance_result

check:
  - python: |
      addr = ctx.get_variable('my_address')
      assert addr, "–ê–¥—Ä–µ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–≤–ª–µ—á—ë–Ω"
      assert addr.startswith('W'), "–ê–¥—Ä–µ—Å–∞ Cellframe –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 'W'"
```

**Save —Ö–µ–ª–ø–µ—Ä—ã:**
- `save_wallet: var` - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç wallet address 
- `save_hash: var` - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç hash (0x[hex]{64})
- `save_node: var` - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç node address 
- `save: var` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤–µ—Å—å –≤—ã–≤–æ–¥

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**

```yaml
# ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π - —á–∏—Å—Ç–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ
- cli: wallet info -w test
  save_wallet: addr

# ‚ùå –°—Ç–∞—Ä—ã–π - verbose (—É—Å—Ç–∞—Ä–µ–ª)
- cli: wallet info -w test
  extract_to:
    addr:
      type: wallet_address
```

---

## –£—Ä–æ–∫ 4: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–æ–∫–µ–Ω–∞–º–∏

**–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω, —ç–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å.

```yaml
name: –£—Ä–æ–∫ 4 - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–æ–∫–µ–Ω–∞–º–∏
description: –ü–æ–ª–Ω—ã–π workflow —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–∫–µ–Ω–æ–º

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
includes:
  - common/create_test_cert.yml  # –°–æ–∑–¥–∞—ë—Ç test_cert –¥–ª—è –ø–æ–¥–ø–∏—Å–∏
  - common/set_net_default.yml   # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç -net

setup:
  # –°–æ–∑–¥–∞—Ç—å –∫–æ—à–µ–ª—ë–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
  - cli: wallet new -w my_wallet
  
  - cli: wallet info -w my_wallet
    save_wallet: wallet_addr

test:
  # –®–∞–≥ 1: –û–±—ä—è–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
  - cli: token_decl -token LESSON4 -total_supply 1000000 -decimals 18 -signs_total 1 -signs_emission 1 -certs test_cert
    save: token_hash
    wait: 3s
  
  # –®–∞–≥ 2: –≠–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã
  - cli: token_emit -token LESSON4 -value 10000 -addr {{wallet_addr}} -certs test_cert
    save: emission_tx
    wait: 3s

check:
  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–æ–∫–µ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  - cli: token info -name LESSON4
    contains: "LESSON4"
```

**üí° –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- `create_test_cert.yml` —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –û–î–ò–ù —Ä–∞–∑ –Ω–∞ —É—Ä–æ–≤–Ω–µ suite (–Ω–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è)
- `set_net_default.yml` –¥–æ–±–∞–≤–ª—è–µ—Ç `-net stagenet` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `-certs test_cert` —è–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–¥–ø–∏—Å–∏
- `save:` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç hash –¥–ª—è token/emission –∫–æ–º–∞–Ω–¥

---

## –£—Ä–æ–∫ 5: –ù–∞–¥—ë–∂–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —Å wait_for_datum

**–ó–∞–¥–∞—á–∞:** –î–æ–∂–¥–∞—Ç—å—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ.

**‚ùå –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (–Ω–µ–Ω–∞–¥—ë–∂–Ω—ã–π):**

```yaml
test:
  - cli: token_emit -token TEST -value 1000 -addr {{addr}} -certs test_cert
    save: tx_hash
  
  - wait: 30s  # –°–∫–æ–ª—å–∫–æ? –ú–∞–ª–æ = –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ç–µ—Å—Ç, –º–Ω–æ–≥–æ = –º–µ–¥–ª–µ–Ω–Ω–æ
```

**‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±:**

```yaml
test:
  - cli: token_emit -token TEST -value 1000 -addr {{addr}} -certs test_cert
    save: tx_hash
  
  # –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ - –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–π lifecycle –¥–∞—Ç—É–º–∞
  - wait_for_datum: "{{tx_hash}}"
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç wait_for_datum:**
1. **0.5s** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ—è–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—É–º–∞ –≤ mempool (–µ—Å–ª–∏ –Ω–µ—Ç ‚Üí REJECTED)
2. **30s** - –∂–¥—ë—Ç –≤–∫–ª—é—á–µ–Ω–∏—è –¥–∞—Ç—É–º–∞ –≤ –±–ª–æ–∫
3. **60s** - –∂–¥—ë—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –±–ª–æ–∫–∞ –ø–æ —Å–µ—Ç–∏
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ (–±–µ–∑ –ª–∏—à–Ω–µ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è!)

**–ü—Ä–∏–º–µ—Ä —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–∞—Ç—É–º–∞–º–∏:**

```yaml
test:
  - cli: token_decl -token T1 -total_supply 1000000 -decimals 18 -signs_total 1 -signs_emission 1 -certs test_cert
    save: token1
  
  - cli: token_decl -token T2 -total_supply 2000000 -decimals 18 -signs_total 1 -signs_emission 1 -certs test_cert
    save: token2
  
  # –ñ–¥–∞—Ç—å –æ–±–∞ —Ç–æ–∫–µ–Ω–∞
  - wait_for_datum:
      - "{{token1}}"
      - "{{token2}}"
```

---

## –£—Ä–æ–∫ 6: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ includes

**–ó–∞–¥–∞—á–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.

**–û–±—â–∏–µ includes –≤ `tests/common/`:**
- `create_test_cert.yml` - –°–æ–∑–¥–∞—ë—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è –ø–æ–¥–ø–∏—Å–∏
- `set_net_default.yml` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `-net {{network_name}}`
- `wallets/create_wallet.yml` - –°–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ—à–µ–ª—ë–∫
- `networks/single_node.yml` - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è

**–ü—Ä–∏–º–µ—Ä:**

```yaml
name: –£—Ä–æ–∫ 6 - Includes
description: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

includes:
  - common/create_test_cert.yml
  - common/set_net_default.yml
  - common/wallets/create_wallet.yml

# –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã:
# - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è test_cert
# - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è wallet_addr
# - -net –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ CLI –∫–æ–º–∞–Ω–¥–∞–º

test:
  # —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ -net –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
  - cli: token_decl -token INC -total_supply 1000000 -decimals 18 -signs_total 1 -signs_emission 1 -certs test_cert
```

**–°–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ include:**

`tests/common/my_template.yml`:
```yaml
# –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞

setup:
  - cli: token_decl -token {{token_name}} -total_supply {{supply}} -decimals 18 -signs_total 1 -signs_emission 1 -certs test_cert

variables:
  token_created: true
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```yaml
includes:
  - common/my_template.yml

variables:
  token_name: MYTOKEN
  supply: 5000000

test:
  - cli: token list
    contains: "{{token_name}}"
```

---

## –£—Ä–æ–∫ 7: –¢–µ—Å—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã (suites)

**–ó–∞–¥–∞—á–∞:** –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ suites —Å –æ–±—â–∏–º setup.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ suite:**
```
tests/e2e/token/
‚îú‚îÄ‚îÄ token.yml              # Suite descriptor
‚îú‚îÄ‚îÄ 001_token_decl.yml     # –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
‚îú‚îÄ‚îÄ 002_token_emit.yml     # –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
‚îî‚îÄ‚îÄ 003_token_list.yml     # –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
```

**Suite descriptor** (`token.yml`):

```yaml
suite: "Token Operations Suite"
description: "E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ç–æ–∫–µ–Ω–æ–≤"
tags: [e2e, token]

# Default —Å–µ—Ç—å –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤ —ç—Ç–æ–º suite
network:
  topology: default

# –û–±—â–∏–µ includes - –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º —Å—Ü–µ–Ω–∞—Ä–∏—è–º
includes:
  - common/create_test_cert.yml
  - common/set_net_default.yml

# Suite-level setup - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –û–î–ò–ù —Ä–∞–∑ –ø–µ—Ä–µ–¥ –≤—Å–µ–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏
setup:
  - wait: 5s
```

**–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π** (`001_token_decl.yml`):

```yaml
name: –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
description: –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞

# –ù–ï –Ω—É–∂–Ω—ã includes! –ù–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç suite descriptor
# –ù–ï –Ω—É–∂–Ω–∞ network! –ù–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç suite

test:
  - cli: token_decl -token TEST -total_supply 1000000 -decimals 18 -signs_total 1 -signs_emission 1 -certs test_cert
    save: token_hash

check:
  - cli: token info -name TEST
    contains: "TEST"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –û–î–ò–ù —Ä–∞–∑ –Ω–∞ suite (–Ω–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è)
- –û–±—â–∏–π setup —Ä–∞–∑–¥–µ–ª—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏
- –ß–∏—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –º–µ–∂–¥—É suites (—á–µ—Ä–µ–∑ snapshots)
- –õ–æ–≥–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

---

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ defaults

```yaml
# ‚úÖ –•–æ—Ä–æ—à–æ
defaults:
  node: node1
  wait: 3s

test:
  - cli: token list
  - cli: wallet list
  - cli: version

# ‚ùå –ü–ª–æ—Ö–æ - –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
test:
  - cli: token list
    node: node1
    wait: 3s
  - cli: wallet list
    node: node1
    wait: 3s
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ wait_for_datum –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö wait

```yaml
# ‚úÖ –•–æ—Ä–æ—à–æ - –Ω–∞–¥—ë–∂–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ
- cli: token_emit -token TEST -value 1000 -addr {{addr}} -certs test_cert
  save: tx
- wait_for_datum: "{{tx}}"

# ‚ùå –ü–ª–æ—Ö–æ - –º–µ–¥–ª–µ–Ω–Ω–æ –∏ –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ
- cli: token_emit -token TEST -value 1000 -addr {{addr}} -certs test_cert
- wait: 30s  # –°–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ? –°–ª–∏—à–∫–æ–º –º–∞–ª–æ?
```

### 3. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–≤–ª–µ–∫–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ

```yaml
# ‚úÖ –•–æ—Ä–æ—à–æ - –∫–æ—Ä–æ—Ç–∫–∏–π save helper
- cli: wallet info -w my_wallet
  save_wallet: addr

# ‚ùå –ü–ª–æ—Ö–æ - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤–µ—Å—å –≤—ã–≤–æ–¥
- cli: wallet info -w my_wallet
  save: wallet_output
  # –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –≤—Ä—É—á–Ω—É—é
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ includes –¥–ª—è –æ–±—â–µ–≥–æ setup

```yaml
# ‚úÖ –•–æ—Ä–æ—à–æ - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ
includes:
  - common/create_test_cert.yml
  - common/set_net_default.yml

# ‚ùå –ü–ª–æ—Ö–æ - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ setup –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–µ
setup:
  - tool: cert create test_cert sig_dil
# ... —Ç–æ –∂–µ —Å–∞–º–æ–µ –≤ 50 —Ç–µ—Å—Ç–∞—Ö
```

### 5. –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç—ã –≤ suites

```yaml
# ‚úÖ –•–æ—Ä–æ—à–æ - suite descriptor
# tests/e2e/token.yml
suite: "Token Suite"
includes:
  - common/create_test_cert.yml

# –ó–∞—Ç–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç includes

# ‚ùå –ü–ª–æ—Ö–æ - –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –≤–∫–ª—é—á–∞–µ—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ
# 001_test.yml, 002_test.yml, 003_test.yml –≤—Å–µ –∏–º–µ—é—Ç:
includes:
  - common/create_test_cert.yml
```

### 6. –ë—É–¥—å—Ç–µ —è–≤–Ω—ã–º–∏ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```yaml
# ‚úÖ –•–æ—Ä–æ—à–æ - —è–≤–Ω–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ
- cli: token_decl -token TEST -total_supply 1000000 -decimals 18 -signs_total 1 -signs_emission 1 -certs test_cert

# ‚ùå –ü–ª–æ—Ö–æ - –ø–æ–ª–∞–≥–∞–µ–º—Å—è –Ω–∞ —Å–∫—Ä—ã—Ç—ã–µ defaults
- cli: token_decl -token TEST -total_supply 1000000
# –ì–¥–µ -decimals, -signs_total? –ù–µ—è—Å–Ω–æ!
```

### 7. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞

```yaml
# ‚úÖ –•–æ—Ä–æ—à–æ
name: "–ü–µ—Ä–µ–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ –º–µ–∂–¥—É –¥–≤—É–º—è –∫–æ—à–µ–ª—å–∫–∞–º–∏"
description: "–°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω, —ç–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ wallet1, –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ wallet2, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å—ã"

# ‚ùå –ü–ª–æ—Ö–æ
name: "–¢–µ—Å—Ç 001"
description: "–¢–µ—Å—Ç —Ç–æ–∫–µ–Ω–æ–≤"
```

---

## üéì –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!

–¢–µ–ø–µ—Ä—å –≤—ã –∑–Ω–∞–µ—Ç–µ:
- ‚úÖ –ë–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ü–µ–Ω–∞—Ä–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ defaults –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ Workflow –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ –ù–∞–¥—ë–∂–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ wait_for_datum
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ includes
- ‚úÖ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤ –≤ suites

### –ß—Ç–æ –¥–∞–ª—å—à–µ?

1. **[Cookbook](Cookbook.md)** - –ì–æ—Ç–æ–≤—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –¥–ª—è —Ç–∏–ø–æ–≤—ã—Ö –∑–∞–¥–∞—á
2. **[Glossary](Glossary.md)** - –ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —è–∑—ã–∫–∞
3. **[Examples](../../../examples/)** - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã

### –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- **–†–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:** `tests/e2e/`, `tests/functional/`
- **–û–±—â–∏–µ includes:** `tests/common/`
- **–ü—Ä–∏–º–µ—Ä—ã suites:** `tests/e2e/*.yml` (suite descriptors)

–£–¥–∞—á–∏ –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏! üöÄ

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-10-25
**–Ø–∑—ã–∫:** –†—É—Å—Å–∫–∏–π | [English](../../en/scenarios/Tutorial.md)
