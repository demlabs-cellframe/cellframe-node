# Stage Environment - Network Connectivity Test
# Проверка сетевой связности между нодами

name: Network Connectivity Test
description: Verify that nodes can connect to each other and form a network
tags: [e2e, basic, network, connectivity]
version: "1.0"

network:
  topology: default

defaults:
  wait: 2s

setup:
  - wait: 10s

test:
  - name: "Check network links"
    defaults:
      node: node1
    steps:
      - cli: net -net stagenet link list
        save: node1_links
      
      - cli: net -net stagenet link list
        node: node2
        save: node2_links
      
      - cli: net -net stagenet link list
        node: node4
        save: node4_links

check:
  - python: |
      links = ctx.get_variable('node1_links')
      assert 'active' in links.lower() or 'established' in links.lower(), \
        "Node1 should have active connections"
  
  - cli: net -net stagenet get status
    node: node1
    contains: "online"

