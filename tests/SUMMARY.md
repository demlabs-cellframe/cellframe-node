# üìä –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —à–∞–≥–æ–≤:**
- ‚úÖ `PythonStep` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Python –∫–æ–¥–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- ‚úÖ `BashStep` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Bash —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ —É–∑–ª–∞—Ö

**–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –ø—Ä–æ–≤–µ—Ä–æ–∫:**
- ‚úÖ `PythonCheck` - –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ Python assertions
- ‚úÖ `BashCheck` - –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ Bash —Å–∫—Ä–∏–ø—Ç—ã (exit code)

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `tests/stage-env/src/scenarios/schema.py` - –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- `tests/stage-env/src/scenarios/executor.py` - –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### 2. üìù –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—å—é—Ç–æ–≤

**E2E —Ç–µ—Å—Ç—ã (28 —Ñ–∞–π–ª–æ–≤):**
- `e2e/wallet/` - 4 —Ç–µ—Å—Ç–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ, –∞–¥—Ä–µ—Å–∞, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ, –æ–ø–µ—Ä–∞—Ü–∏–∏)
- `e2e/token/` - 7 —Ç–µ—Å—Ç–æ–≤ (–¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è, —ç–º–∏—Å—Å–∏—è, —Å–ø–∏—Å–æ–∫, —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä—ã, –∏—Å—Ç–æ—Ä–∏—è, —Ñ–ª–∞–≥–∏)
- `e2e/net/` - 5 —Ç–µ—Å—Ç–æ–≤ (—Å–ø–∏—Å–æ–∫, —Å—Ç–∞—Ç—É—Å, –ª–∏–Ω–∫–∏, online/offline)
- `e2e/node/` - 4 —Ç–µ—Å—Ç–∞ (dump, connections, balancer)
- `e2e/chain/` - 3 —Ç–µ—Å—Ç–∞ (—Å–ø–∏—Å–æ–∫, –∞—Ç–æ–º—ã)
- `e2e/mempool/` - 2 —Ç–µ—Å—Ç–∞ (—Å–ø–∏—Å–æ–∫, –æ–ø–µ—Ä–∞—Ü–∏–∏)
- `e2e/integration/` - 3 —Ç–µ—Å—Ç–∞ (–ø–æ–ª–Ω—ã–π lifecycle, multi-node connectivity)

**Functional —Ç–µ—Å—Ç—ã (13 —Ñ–∞–π–ª–æ–≤):**
- `functional/wallet/` - 3 —Ç–µ—Å—Ç–∞ (–±–∞–ª–∞–Ω—Å, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
- `functional/token/` - 3 —Ç–µ—Å—Ç–∞ (—Ñ–ª–∞–≥–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
- `functional/net/` - 3 —Ç–µ—Å—Ç–∞ (sync, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- `functional/node/` - 2 —Ç–µ—Å—Ç–∞ (—Å–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤)
- `functional/chain/` - 2 —Ç–µ—Å—Ç–∞ (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–µ–ø—è—Ö)
- `functional/mempool/` - 2 —Ç–µ—Å—Ç–∞ (–æ–±—Ä–∞–±–æ—Ç–∫–∞)
- `functional/utxo_blocking/` - 3 —Ç–µ—Å—Ç–∞ (arbitrage, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)

**–û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (9 —Ñ–∞–π–ª–æ–≤):**
- `common/wallets/` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–æ–≤
- `common/tokens/` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —ç–º–∏—Å—Å–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- `common/networks/` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ç–µ–π
- `common/checks/` - –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
- `common/setup/` - –æ–∂–∏–¥–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `common/transactions/` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `common/assertions/` - –æ–±—â–∏–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

**–§–∞–π–ª—ã –æ–ø–∏—Å–∞–Ω–∏—è —Å—å—é—Ç–æ–≤ (13 —Ñ–∞–π–ª–æ–≤):**
- –ü–æ –æ–¥–Ω–æ–º—É `.yml` —Ñ–∞–π–ª—É –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å—å—é—Ç–∞ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

### 3. üìö –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω `tests/README.md`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Python –∏ Bash –±–ª–æ–∫–æ–≤
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —è–∑—ã–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã best practices

### 4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã UTXO blocking —Ç–µ—Å—Ç—ã (—Å–∏–Ω—Ç–∞–∫—Å–∏—Å CLI –∫–æ–º–∞–Ω–¥)
- –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ `network` —Å–µ–∫—Ü–∏–∏
- –û–±–Ω–æ–≤–ª–µ–Ω—ã include –ø—É—Ç–∏ –¥–ª—è common –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:** 48
- **–û–±—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:** 9  
- **–§–∞–π–ª–æ–≤ –æ–ø–∏—Å–∞–Ω–∏—è —Å—å—é—Ç–æ–≤:** 13
- **–í—Å–µ–≥–æ YAML —Ñ–∞–π–ª–æ–≤:** 70+

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Python –±–ª–æ–∫–∏
```yaml
test:
  - python: |
      # –î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
      addr = ctx.get_variable('wallet_addr')
      # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
      ctx.set_variable('result', addr.upper())
    save: processed_addr
```

### Bash –±–ª–æ–∫–∏
```yaml
test:
  - bash: |
      echo "Running checks"
      ls -la /opt/cellframe-node/var
    node: node1
    save: output
```

### Check –±–ª–æ–∫–∏ —Å Python/Bash
```yaml
check:
  - python: |
      value = ctx.get_variable('balance')
      assert value > 0, "Balance must be positive"
  
  - bash: |
      [ -f /some/file ] && exit 0 || exit 1
    node: node1
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
```bash
cd tests
./stage-env/stage-env --config=stage-env.cfg run-tests e2e/ functional/
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—å—é—Ç–∞
```bash
./stage-env/stage-env --config=stage-env.cfg run-tests e2e/wallet/
```

### –ó–∞–ø—É—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
```bash
./stage-env/stage-env --config=stage-env.cfg run-tests e2e/ --filter=token
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è, —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å:
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–æ–π Python –∏ Bash –∫–æ–¥–∞ –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- ‚úÖ –ü–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ CLI
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- ‚úÖ –ü—Ä–∏–º–µ—Ä–∞–º–∏ –∏ best practices

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é! üéä
