2025-12-12T08:53:00.529755Z [info     ] file_logging_enabled           log_file=/home/olzh/demlabs/second/cellframe-node/tests/stage-env/../testing/logs/stage-env_20251212_155300.log
2025-12-12T08:53:00.685825Z [info     ] loading_topology_from_template topology=default
2025-12-12T08:53:00.686208Z [info     ] loaded_config                  path=/home/olzh/demlabs/second/cellframe-node/tests/stage-env.cfg
2025-12-12T08:53:00.691213Z [info     ] cert_generator_initialized     certs_dir=/home/olzh/demlabs/second/cellframe-node/tests/testing/cache/certs docker_mode=True
2025-12-12T08:53:00.705613Z [info     ] docker_connected               version=28.5.1
2025-12-12T08:53:00.834301Z [info     ] genesis_initializer_created    network=stagenet
2025-12-12T08:53:00.842680Z [info     ] artifacts_manager_initialized  artifacts_dir=/home/olzh/demlabs/second/cellframe-node/tests/testing/artifacts collect_crash_dumps=True collect_health_logs=True collect_node_logs=True
2025-12-12T08:53:00.844933Z [info     ] squashfs_mode_initialized      compression=none overlayfs_available=True tools_available=True
2025-12-12T08:53:00.845056Z [info     ] snapshot_manager_initialized   base_path=/home/olzh/demlabs/second/cellframe-node/tests/stage-env config={'mode': 'squashfs', 'squashfs_compression': 'none', 'auto_create_on_startup': True, 'snapshot_name': 'clean_state', 'genesis_stage': 'none', 'phase1_snapshot_name': 'phase1_zerochain_genesis', 'auto_cleanup': True, 'keep_snapshot_count': 5, 'snapshots_dir': '../testing/snapshots', 'cache_dir': '../testing/cache'} mode=squashfs
2025-12-12T08:53:00.845641Z [info     ] network_manager_initialized    cache_dir=../testing/cache network=stagenet snapshot_mode=squashfs timeouts={'startup': 600, 'health_check': 600, 'command': 30} topology=default
2025-12-12T08:53:00.845885Z [info     ] starting_network               rebuild=False topology=default
2025-12-12T08:53:00.845953Z [info     ] stopping_previous_environment 
2025-12-12T08:53:00.846005Z [info     ] stopping_services              remove_images=False volumes=False
2025-12-12T08:53:00.907317Z [info     ] services_stopped              
2025-12-12T08:53:00.907471Z [info     ] previous_environment_stopped  
2025-12-12T08:53:00.907521Z [info     ] cleanup_stale_resources        project=cellframe-stage
2025-12-12T08:53:00.916296Z [info     ] cleanup_completed             
2025-12-12T08:53:00.916457Z [info     ] no_phase1_snapshot_cleaning_data_for_fresh_start name=phase1_zerochain_genesis
2025-12-12T08:53:00.916518Z [info     ] cleaning_node_data_after_stop 
2025-12-12T08:53:00.916615Z [info     ] generating_node_configs       
2025-12-12T08:53:00.916721Z [info     ] node_configs_generated         count=8 seed_nodes=3 validators=3
2025-12-12T08:53:00.916777Z [info     ] generating_configs_and_certs  
2025-12-12T08:53:00.916822Z [info     ] generating_configurations      force=False network=stagenet nodes=8
2025-12-12T08:53:00.922415Z [info     ] generating_certificates        count=8 force=False
2025-12-12T08:53:00.922551Z [info     ] generating_all_certificates    method=docker network=stagenet nodes=8 validators=3
• Generating 8 node certificates using Docker...
2025-12-12T08:53:00.950526Z [info     ] calling_docker_cert_generator  image=cf-cert-generator:latest network_id=0x1234 network_name=stagenet node_count=8 output_dir=/home/olzh/demlabs/second/cellframe-node/tests/testing/cache/certs
2025-12-12T08:53:01.381243Z [info     ] cert_generator_docker_output   stdout=
✓ Generated 8 node + 0 validator certificates
2025-12-12T08:53:01.382190Z [info     ] all_certificates_generated     nodes=8 validators=0
2025-12-12T08:53:01.384315Z [info     ] organizing_validator_certificates
2025-12-12T08:53:01.385503Z [info     ] copying_all_private_certs_to_root1_for_centralized_genesis
2025-12-12T08:53:01.385723Z [info     ] all_private_certs_copied_to_root1 additional_certs=2 note='root-1 can now perform centralized genesis with threshold consensus' own_cert=1 total_pvt_certs=3
2025-12-12T08:53:01.386087Z [info     ] distributing_public_certs_to_all_nodes network=stagenet total_nodes=8
2025-12-12T08:53:01.386460Z [info     ] public_certs_distributed_to_node master_certs=3 node_id=1 root_certs=3
2025-12-12T08:53:01.386792Z [info     ] public_certs_distributed_to_node master_certs=3 node_id=2 root_certs=3
2025-12-12T08:53:01.387118Z [info     ] public_certs_distributed_to_node master_certs=3 node_id=3 root_certs=3
2025-12-12T08:53:01.387431Z [info     ] public_certs_distributed_to_node master_certs=3 node_id=4 root_certs=3
2025-12-12T08:53:01.387758Z [info     ] public_certs_distributed_to_node master_certs=3 node_id=5 root_certs=3
2025-12-12T08:53:01.388087Z [info     ] public_certs_distributed_to_node master_certs=3 node_id=6 root_certs=3
2025-12-12T08:53:01.388415Z [info     ] public_certs_distributed_to_node master_certs=3 node_id=7 root_certs=3
2025-12-12T08:53:01.388723Z [info     ] public_certs_distributed_to_node master_certs=3 node_id=8 root_certs=3
2025-12-12T08:53:01.388768Z [info     ] certificates_generated         count=8
2025-12-12T08:53:01.393874Z [info     ] validator_addresses_collected  addresses=[5C21::8029::4E29::0A1F,8CD6::84BB::42A2::5335,610... count=3
2025-12-12T08:53:01.394068Z [info     ] root_node_addresses_collected  addresses=[D1EA::EBC3::59FF::658A,DE04::78A7::3CFD::C8C7,AEE... count=3
2025-12-12T08:53:01.394194Z [info     ] validator_addresses_collected  addresses=[5C21::8029::4E29::0A1F,8CD6::84BB::42A2::5335,610... count=3
2025-12-12T08:53:01.394252Z [info     ] mainchain_validators_configured master_validators_count=3 min_validators_count=2 note='Using master node addresses in validators_addrs for mainchain'
2025-12-12T08:53:01.394512Z [info     ] loaded_config                  path=/home/olzh/demlabs/second/cellframe-node/tests/stage-env.cfg
2025-12-12T08:53:01.400524Z [info     ] configurations_generated       network=stagenet nodes=8
2025-12-12T08:53:01.400629Z [info     ] generating_docker_compose     
2025-12-12T08:53:01.400891Z [info     ] generating_compose_file        build_type=debug cache_dir=../testing/cache node_count=8 node_source_type=url
2025-12-12T08:53:01.425973Z [info     ] compose_file_generated         path=/home/olzh/demlabs/second/cellframe-node/tests/stage-env/docker-compose.generated.yml services=8
2025-12-12T08:53:01.426143Z [info     ] node_distribution              full=2 master=3 root=3
2025-12-12T08:53:01.426206Z [info     ] === PHASE 1: ROOT Nodes Startup (DAG-PoA Genesis) ===
2025-12-12T08:53:01.434228Z [info     ] network_consensus_monitor_initialized network=stagenet nodes=3
2025-12-12T08:53:01.449629Z [info     ] Loaded scenario: PHASE 1 - Zerochain Genesis from genesis/phase1_zerochain.yml
2025-12-12T08:53:01.466857Z [info     ] executing_phase1_scenario     
2025-12-12T08:53:01.467027Z [info     ] Starting scenario: PHASE 1 - Zerochain Genesis
2025-12-12T08:53:01.467081Z [info     ] Description: Initialize ROOT nodes, create token and emission
2025-12-12T08:53:01.467181Z [info     ] Executing setup phase...      
2025-12-12T08:53:01.467252Z [info     ] Step 1/4: ConfigStep (cellframe-node)
2025-12-12T08:53:01.467428Z [info     ] Config: regenerating 'cellframe-node' for nodes [1, 2, 3] with vars ['seed_mode']
2025-12-12T08:53:01.468111Z [info     ] cert_generator_initialized     certs_dir=/home/olzh/demlabs/second/cellframe-node/tests/testing/cache/certs docker_mode=True
2025-12-12T08:53:01.469251Z [info     ] Regenerated cellframe-node.cfg for node 1
2025-12-12T08:53:01.469486Z [info     ] Regenerated cellframe-node.cfg for node 2
2025-12-12T08:53:01.469665Z [info     ] Regenerated cellframe-node.cfg for node 3
2025-12-12T08:53:01.469726Z [info     ] Step 2/4: DockerOpStep        
2025-12-12T08:53:01.469802Z [info     ] Docker operation: start on services ['root-1', 'root-2', 'root-3', 'master-1', 'master-2', 'master-3']
2025-12-12T08:53:01.469872Z [info     ] starting_services              services=['node-1', 'node-2', 'node-3', 'node-4', 'node-5', 'node-6']
2025-12-12T08:53:02.202617Z [info     ] services_started              
2025-12-12T08:53:02.203216Z [info     ] waiting_for_container_ips      containers=['cellframe-stage-node-1', 'cellframe-stage-node-2', 'cellframe-stage-node-3', 'cellframe-stage-node-4', 'cellframe-stage-node-5', 'cellframe-stage-node-6']
2025-12-12T08:53:02.203345Z [info     ] waiting_for_container_ips      containers=['cellframe-stage-node-3', 'cellframe-stage-node-6', 'cellframe-stage-node-4', 'cellframe-stage-node-1', 'cellframe-stage-node-5', 'cellframe-stage-node-2'] timeout=30.0
2025-12-12T08:53:02.233966Z [info     ] all_containers_have_ips        count=6 elapsed=0.0
2025-12-12T08:53:02.234109Z [info     ] ✅ All containers have IP addresses count=6
2025-12-12T08:53:02.234175Z [info     ] ✅ Docker operation 'start' completed
2025-12-12T08:53:02.234236Z [info     ] Step 3/4: NetworkWaitStep     
2025-12-12T08:53:02.234299Z [info     ] Waiting for network state: online on nodes ['root-1', 'root-2', 'root-3', 'master-1', 'master-2', 'master-3']
2025-12-12T08:53:02.255907Z [info     ] waiting_for_nodes_online       node_count=6 timeout=60
2025-12-12T08:53:09.570991Z [info     ] all_nodes_online               count=6 elapsed=7.0s
2025-12-12T08:53:09.571132Z [info     ] ✅ Network state 'online' achieved
2025-12-12T08:53:09.571196Z [info     ] Step 4/4: WaitStep            
2025-12-12T08:53:09.571274Z [info     ] Executing WaitStep. Dump: {'wait': '5s', 'datum': None, 'node': None, 'nodes': None, 'network': None, 'chain': None, 'timeout': 60, 'check_master': True, 'expected_count': None}
2025-12-12T08:53:09.571470Z [info     ] Waiting 5s (5s)               
2025-12-12T08:53:15.530980Z [info     ] collecting_global_context_after_setup nodes=3
2025-12-12T08:53:15.531184Z [info     ] global_context_waiting_for_ips containers=['cellframe-stage-node-1', 'cellframe-stage-node-2', 'cellframe-stage-node-3'] count=3
2025-12-12T08:53:15.531254Z [info     ] waiting_for_container_ips      containers=['cellframe-stage-node-3', 'cellframe-stage-node-1', 'cellframe-stage-node-2'] timeout=30.0
2025-12-12T08:53:15.543869Z [info     ] all_containers_have_ips        count=3 elapsed=0.0
2025-12-12T08:53:15.544010Z [info     ] global_context_ips_collected   count=3 node_ip_map={'node1': '172.20.0.10', 'node2': '172.20.0.11', 'node3': '172.20.0.12'}
2025-12-12T08:53:15.544083Z [info     ] global_context_injected_into_scenario node_count=3 node_ip_map={'node1': '172.20.0.10', 'node2': '172.20.0.11', 'node3': '172.20.0.12'} variables=['network_name', 'topology_name', 'node_ips', 'node_ip', 'node_count', 'root_count', 'master_count', 'full_count', 'root_nodes', 'master_nodes', 'full_nodes']
2025-12-12T08:53:15.553895Z [info     ] initializing_cli_parser_after_setup
2025-12-12T08:53:15.603339Z [info     ] Parsing CLI help from container container=cellframe-stage-node-4
2025-12-12T08:53:15.683970Z [info     ] CLI help output (first 500 chars): Available commands:

srv_stake:			Delegated stake service commands
dag:			DAG commands
dag_poa:			DAG PoA commands
block:			Create and explore blockchains
esbocs:			ESBOCS commands
poll:			Voting/poll commands
net:			Network commands
net_srv:			Network services managment
srv_xchange:			eXchange service commands
stake_ext:			Extended stake commands
stake_lock:			Stake lock service commands
global_db:			Work with global database
mempool:			Command for working with mempool
node:			Work with node
ve
2025-12-12T08:53:15.684217Z [info     ] Found 41 CLI commands         
2025-12-12T08:53:18.262735Z [info     ] CLI parsing complete: 41 commands mapped
2025-12-12T08:53:18.263126Z [info     ] Saved CLI commands to cache: /home/olzh/demlabs/second/cellframe-node/tests/stage-env/.cache/cli_commands.json
2025-12-12T08:53:18.263232Z [info     ] cli_parser_initialized_after_setup commands=41 note='CLI defaults will be applied to commands'
2025-12-12T08:53:18.263302Z [info     ] Executing test phase...       
2025-12-12T08:53:18.263376Z [info     ] Step 1/23: StepGroup          
2025-12-12T08:53:18.263429Z [info     ] Step 1/3: CLIStep             
2025-12-12T08:53:18.263498Z [info     ] CLI step: node dump (node: root-1)
2025-12-12T08:53:18.270986Z [info     ] exec_cli_command_debug         command_original='node dump -net stagenet' command_split=['node', 'dump', '-net', 'stagenet'] container=cellframe-stage-node-1 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-1', 'sh', '-c', 'cellframe-node-cli node dump -net stagenet'] shell_cmd='cellframe-node-cli node dump -net stagenet'
2025-12-12T08:53:18.348274Z [info     ] cli_save_node_output_debug     command='node dump -net stagenet' output_length=292 output_preview='Record timestamp: Fri, 12 Dec 2025 08:53:13 +0000\nRecord version: 2\nNode version: 5.7-14\nNode addr: D1EA::EBC3::59FF::658A\nNet: stagenet\nRole: NODE_ROLE_ROOT\nEvents count: 0\nAtoms count: 0\nUplinks count: 0\nDownlinks count: 0\n-----------------------------------------------------------------\n\n' pattern='Node addr:\\s+([A-Fa-f0-9:]+)'
2025-12-12T08:53:18.348543Z [info     ] Step 2/3: CLIStep             
2025-12-12T08:53:18.348610Z [info     ] CLI step: node dump (node: root-2)
2025-12-12T08:53:18.356172Z [info     ] exec_cli_command_debug         command_original='node dump -net stagenet' command_split=['node', 'dump', '-net', 'stagenet'] container=cellframe-stage-node-2 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-2', 'sh', '-c', 'cellframe-node-cli node dump -net stagenet'] shell_cmd='cellframe-node-cli node dump -net stagenet'
2025-12-12T08:53:18.415714Z [info     ] cli_save_node_output_debug     command='node dump -net stagenet' output_length=292 output_preview='Record timestamp: Fri, 12 Dec 2025 08:53:13 +0000\nRecord version: 2\nNode version: 5.7-14\nNode addr: DE04::78A7::3CFD::C8C7\nNet: stagenet\nRole: NODE_ROLE_ROOT\nEvents count: 0\nAtoms count: 0\nUplinks count: 0\nDownlinks count: 0\n-----------------------------------------------------------------\n\n' pattern='Node addr:\\s+([A-Fa-f0-9:]+)'
2025-12-12T08:53:18.415887Z [info     ] Step 3/3: CLIStep             
2025-12-12T08:53:18.415947Z [info     ] CLI step: node dump (node: root-3)
2025-12-12T08:53:18.422839Z [info     ] exec_cli_command_debug         command_original='node dump -net stagenet' command_split=['node', 'dump', '-net', 'stagenet'] container=cellframe-stage-node-3 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-3', 'sh', '-c', 'cellframe-node-cli node dump -net stagenet'] shell_cmd='cellframe-node-cli node dump -net stagenet'
2025-12-12T08:53:18.503715Z [info     ] cli_save_node_output_debug     command='node dump -net stagenet' output_length=292 output_preview='Record timestamp: Fri, 12 Dec 2025 08:53:13 +0000\nRecord version: 2\nNode version: 5.7-14\nNode addr: AEEA::B5BB::5534::6745\nNet: stagenet\nRole: NODE_ROLE_ROOT\nEvents count: 0\nAtoms count: 0\nUplinks count: 0\nDownlinks count: 0\n-----------------------------------------------------------------\n\n' pattern='Node addr:\\s+([A-Fa-f0-9:]+)'
2025-12-12T08:53:18.503885Z [info     ] Step 2/23: StepGroup          
2025-12-12T08:53:18.503957Z [info     ] Step 1/2: CLIStep             
2025-12-12T08:53:18.504033Z [info     ] CLI step: node add -addr DE04::78A7::3CFD::C8C7 -alias root-2 -host 172.20.0.11 -port 8079 (node: root-1)
2025-12-12T08:53:18.511292Z [info     ] exec_cli_command_debug         command_original='node add -addr DE04::78A7::3CFD::C8C7 -alias root-2 -host 172.20.0.11 -port 8079 -net stagenet' command_split=['node', 'add', '-addr', 'DE04::78A7::3CFD::C8C7', '-alias', 'root-2', '-host', '172.20.0.11', '-port', '8079', '-net', 'stagenet'] container=cellframe-stage-node-1 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-1', 'sh', '-c', 'cellframe-node-cli node add -addr DE04::78A7::3CFD::C8C7 -alias root-2 -host 172.20.0.11 -port 8079 -net stagenet'] shell_cmd='cellframe-node-cli node add -addr DE04::78A7::3CFD::C8C7 -alias root-2 -host 172.20.0.11 -port 8079 -net stagenet'
2025-12-12T08:53:18.582170Z [info     ] Step 2/2: CLIStep             
2025-12-12T08:53:18.582318Z [info     ] CLI step: node add -addr AEEA::B5BB::5534::6745 -alias root-3 -host 172.20.0.12 -port 8079 (node: root-1)
2025-12-12T08:53:18.589199Z [info     ] exec_cli_command_debug         command_original='node add -addr AEEA::B5BB::5534::6745 -alias root-3 -host 172.20.0.12 -port 8079 -net stagenet' command_split=['node', 'add', '-addr', 'AEEA::B5BB::5534::6745', '-alias', 'root-3', '-host', '172.20.0.12', '-port', '8079', '-net', 'stagenet'] container=cellframe-stage-node-1 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-1', 'sh', '-c', 'cellframe-node-cli node add -addr AEEA::B5BB::5534::6745 -alias root-3 -host 172.20.0.12 -port 8079 -net stagenet'] shell_cmd='cellframe-node-cli node add -addr AEEA::B5BB::5534::6745 -alias root-3 -host 172.20.0.12 -port 8079 -net stagenet'
2025-12-12T08:53:18.674240Z [info     ] Step 3/23: StepGroup          
2025-12-12T08:53:18.674383Z [info     ] Step 1/2: CLIStep             
2025-12-12T08:53:18.674443Z [info     ] CLI step: node add -addr D1EA::EBC3::59FF::658A -alias root-1 -host 172.20.0.10 -port 8079 (node: root-2)
2025-12-12T08:53:18.681740Z [info     ] exec_cli_command_debug         command_original='node add -addr D1EA::EBC3::59FF::658A -alias root-1 -host 172.20.0.10 -port 8079 -net stagenet' command_split=['node', 'add', '-addr', 'D1EA::EBC3::59FF::658A', '-alias', 'root-1', '-host', '172.20.0.10', '-port', '8079', '-net', 'stagenet'] container=cellframe-stage-node-2 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-2', 'sh', '-c', 'cellframe-node-cli node add -addr D1EA::EBC3::59FF::658A -alias root-1 -host 172.20.0.10 -port 8079 -net stagenet'] shell_cmd='cellframe-node-cli node add -addr D1EA::EBC3::59FF::658A -alias root-1 -host 172.20.0.10 -port 8079 -net stagenet'
2025-12-12T08:53:18.770483Z [info     ] Step 2/2: CLIStep             
2025-12-12T08:53:18.770626Z [info     ] CLI step: node add -addr AEEA::B5BB::5534::6745 -alias root-3 -host 172.20.0.12 -port 8079 (node: root-2)
2025-12-12T08:53:18.777827Z [info     ] exec_cli_command_debug         command_original='node add -addr AEEA::B5BB::5534::6745 -alias root-3 -host 172.20.0.12 -port 8079 -net stagenet' command_split=['node', 'add', '-addr', 'AEEA::B5BB::5534::6745', '-alias', 'root-3', '-host', '172.20.0.12', '-port', '8079', '-net', 'stagenet'] container=cellframe-stage-node-2 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-2', 'sh', '-c', 'cellframe-node-cli node add -addr AEEA::B5BB::5534::6745 -alias root-3 -host 172.20.0.12 -port 8079 -net stagenet'] shell_cmd='cellframe-node-cli node add -addr AEEA::B5BB::5534::6745 -alias root-3 -host 172.20.0.12 -port 8079 -net stagenet'
2025-12-12T08:53:18.837307Z [info     ] Step 4/23: StepGroup          
2025-12-12T08:53:18.837455Z [info     ] Step 1/2: CLIStep             
2025-12-12T08:53:18.837518Z [info     ] CLI step: node add -addr D1EA::EBC3::59FF::658A -alias root-1 -host 172.20.0.10 -port 8079 (node: root-3)
2025-12-12T08:53:18.847367Z [info     ] exec_cli_command_debug         command_original='node add -addr D1EA::EBC3::59FF::658A -alias root-1 -host 172.20.0.10 -port 8079 -net stagenet' command_split=['node', 'add', '-addr', 'D1EA::EBC3::59FF::658A', '-alias', 'root-1', '-host', '172.20.0.10', '-port', '8079', '-net', 'stagenet'] container=cellframe-stage-node-3 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-3', 'sh', '-c', 'cellframe-node-cli node add -addr D1EA::EBC3::59FF::658A -alias root-1 -host 172.20.0.10 -port 8079 -net stagenet'] shell_cmd='cellframe-node-cli node add -addr D1EA::EBC3::59FF::658A -alias root-1 -host 172.20.0.10 -port 8079 -net stagenet'
2025-12-12T08:53:18.920779Z [info     ] Step 2/2: CLIStep             
2025-12-12T08:53:18.920922Z [info     ] CLI step: node add -addr DE04::78A7::3CFD::C8C7 -alias root-2 -host 172.20.0.11 -port 8079 (node: root-3)
2025-12-12T08:53:18.929291Z [info     ] exec_cli_command_debug         command_original='node add -addr DE04::78A7::3CFD::C8C7 -alias root-2 -host 172.20.0.11 -port 8079 -net stagenet' command_split=['node', 'add', '-addr', 'DE04::78A7::3CFD::C8C7', '-alias', 'root-2', '-host', '172.20.0.11', '-port', '8079', '-net', 'stagenet'] container=cellframe-stage-node-3 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-3', 'sh', '-c', 'cellframe-node-cli node add -addr DE04::78A7::3CFD::C8C7 -alias root-2 -host 172.20.0.11 -port 8079 -net stagenet'] shell_cmd='cellframe-node-cli node add -addr DE04::78A7::3CFD::C8C7 -alias root-2 -host 172.20.0.11 -port 8079 -net stagenet'
2025-12-12T08:53:18.998636Z [info     ] Step 5/23: StepGroup          
2025-12-12T08:53:18.998778Z [info     ] Step 1/3: CLIStep             
2025-12-12T08:53:18.998830Z [info     ] CLI step: net go offline (node: root-1)
2025-12-12T08:53:19.005572Z [info     ] exec_cli_command_debug         command_original='net go offline -net stagenet' command_split=['net', 'go', 'offline', '-net', 'stagenet'] container=cellframe-stage-node-1 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-1', 'sh', '-c', 'cellframe-node-cli net go offline -net stagenet'] shell_cmd='cellframe-node-cli net go offline -net stagenet'
2025-12-12T08:53:19.080358Z [info     ] Step 2/3: CLIStep             
2025-12-12T08:53:19.080493Z [info     ] CLI step: net go offline (node: root-2)
2025-12-12T08:53:19.087553Z [info     ] exec_cli_command_debug         command_original='net go offline -net stagenet' command_split=['net', 'go', 'offline', '-net', 'stagenet'] container=cellframe-stage-node-2 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-2', 'sh', '-c', 'cellframe-node-cli net go offline -net stagenet'] shell_cmd='cellframe-node-cli net go offline -net stagenet'
2025-12-12T08:53:19.122709Z [info     ] Step 3/3: CLIStep             
2025-12-12T08:53:19.122842Z [info     ] CLI step: net go offline (node: root-3)
2025-12-12T08:53:19.130019Z [info     ] exec_cli_command_debug         command_original='net go offline -net stagenet' command_split=['net', 'go', 'offline', '-net', 'stagenet'] container=cellframe-stage-node-3 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-3', 'sh', '-c', 'cellframe-node-cli net go offline -net stagenet'] shell_cmd='cellframe-node-cli net go offline -net stagenet'
2025-12-12T08:53:19.195144Z [info     ] Step 6/23: NetworkWaitStep    
2025-12-12T08:53:19.195276Z [info     ] Waiting for network state: offline on nodes ['root-1', 'root-2', 'root-3']
2025-12-12T08:53:19.195372Z [info     ] waiting_for_nodes_offline      node_count=3 timeout=60
2025-12-12T08:53:19.353913Z [info     ] all_nodes_offline              count=3 elapsed=0.0s
2025-12-12T08:53:19.354036Z [info     ] ✅ Network state 'offline' achieved
2025-12-12T08:53:19.354095Z [info     ] Step 7/23: StepGroup          
2025-12-12T08:53:19.354174Z [info     ] Step 1/3: CLIStep             
2025-12-12T08:53:19.354239Z [info     ] CLI step: net go online (node: root-1)
2025-12-12T08:53:19.360753Z [info     ] exec_cli_command_debug         command_original='net go online -net stagenet' command_split=['net', 'go', 'online', '-net', 'stagenet'] container=cellframe-stage-node-1 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-1', 'sh', '-c', 'cellframe-node-cli net go online -net stagenet'] shell_cmd='cellframe-node-cli net go online -net stagenet'
2025-12-12T08:53:19.431745Z [info     ] Step 2/3: CLIStep             
2025-12-12T08:53:19.431877Z [info     ] CLI step: net go online (node: root-2)
2025-12-12T08:53:19.438844Z [info     ] exec_cli_command_debug         command_original='net go online -net stagenet' command_split=['net', 'go', 'online', '-net', 'stagenet'] container=cellframe-stage-node-2 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-2', 'sh', '-c', 'cellframe-node-cli net go online -net stagenet'] shell_cmd='cellframe-node-cli net go online -net stagenet'
2025-12-12T08:53:19.519776Z [info     ] Step 3/3: CLIStep             
2025-12-12T08:53:19.519903Z [info     ] CLI step: net go online (node: root-3)
2025-12-12T08:53:19.527156Z [info     ] exec_cli_command_debug         command_original='net go online -net stagenet' command_split=['net', 'go', 'online', '-net', 'stagenet'] container=cellframe-stage-node-3 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-3', 'sh', '-c', 'cellframe-node-cli net go online -net stagenet'] shell_cmd='cellframe-node-cli net go online -net stagenet'
2025-12-12T08:53:19.599103Z [info     ] Step 8/23: NetworkWaitStep    
2025-12-12T08:53:19.599233Z [info     ] Waiting for network state: links_established on nodes ['root-1', 'root-2', 'root-3']
2025-12-12T08:53:19.606064Z [info     ] network_consensus_monitor_initialized network=stagenet nodes=3
2025-12-12T08:53:19.606239Z [info     ] waiting_for_links_established  nodes=3 timeout=120.0
2025-12-12T08:53:26.345183Z [info     ] links_establishment_progress   elapsed=6.6s ready=0 total=3
2025-12-12T08:53:32.862189Z [info     ] links_establishment_progress   elapsed=13.0s ready=0 total=3
2025-12-12T08:53:39.363255Z [info     ] links_establishment_progress   elapsed=19.6s ready=2 total=3
2025-12-12T08:53:44.617333Z [info     ] all_nodes_links_established    elapsed=23.9s
2025-12-12T08:53:44.617459Z [info     ] ✅ Network state 'links_established' achieved
2025-12-12T08:53:44.617909Z [info     ] Step 9/23: WaitStep           
2025-12-12T08:53:44.617988Z [info     ] Executing WaitStep. Dump: {'wait': 'cli_ready', 'datum': None, 'node': None, 'nodes': ['root-1', 'root-2', 'root-3'], 'network': None, 'chain': None, 'timeout': 40, 'check_master': True, 'expected_count': None}
2025-12-12T08:53:44.618056Z [info     ] Waiting for condition: cli_ready
2025-12-12T08:53:44.636322Z [info     ] exec_cli_command_debug         command_original='net -net stagenet get status' command_split=['net', '-net', 'stagenet', 'get', 'status'] container=cellframe-stage-node-1 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-1', 'sh', '-c', 'cellframe-node-cli net -net stagenet get status'] shell_cmd='cellframe-node-cli net -net stagenet get status'
2025-12-12T08:53:44.701255Z [info     ] exec_cli_command_debug         command_original='net -net stagenet get status' command_split=['net', '-net', 'stagenet', 'get', 'status'] container=cellframe-stage-node-2 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-2', 'sh', '-c', 'cellframe-node-cli net -net stagenet get status'] shell_cmd='cellframe-node-cli net -net stagenet get status'
2025-12-12T08:53:44.775451Z [info     ] exec_cli_command_debug         command_original='net -net stagenet get status' command_split=['net', '-net', 'stagenet', 'get', 'status'] container=cellframe-stage-node-3 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-3', 'sh', '-c', 'cellframe-node-cli net -net stagenet get status'] shell_cmd='cellframe-node-cli net -net stagenet get status'
2025-12-12T08:53:44.846087Z [info     ] ✅ Waiter 'cli_ready' completed
2025-12-12T08:53:44.846231Z [info     ] Step 10/23: CLIStep           
2025-12-12T08:53:44.846285Z [info     ] CLI step: wallet new -w fee_collector (node: root-1)
2025-12-12T08:53:44.853639Z [info     ] exec_cli_command_debug         command_original='wallet new -w fee_collector -net stagenet' command_split=['wallet', 'new', '-w', 'fee_collector', '-net', 'stagenet'] container=cellframe-stage-node-1 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-1', 'sh', '-c', 'cellframe-node-cli wallet new -w fee_collector -net stagenet'] shell_cmd='cellframe-node-cli wallet new -w fee_collector -net stagenet'
2025-12-12T08:53:44.914065Z [info     ] Step 11/23: CLIStep           
2025-12-12T08:53:44.914196Z [info     ] CLI step: wallet info -w fee_collector (node: root-1)
2025-12-12T08:53:44.921453Z [info     ] exec_cli_command_debug         command_original='wallet info -w fee_collector -net stagenet' command_split=['wallet', 'info', '-w', 'fee_collector', '-net', 'stagenet'] container=cellframe-stage-node-1 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-1', 'sh', '-c', 'cellframe-node-cli wallet info -w fee_collector -net stagenet'] shell_cmd='cellframe-node-cli wallet info -w fee_collector -net stagenet'
2025-12-12T08:53:44.994153Z [info     ] Step 12/23: StepGroup         
2025-12-12T08:53:44.994297Z [info     ] Step 1/13: CLIStep            
2025-12-12T08:53:44.994364Z [info     ] CLI step: token_decl -token TCELL -chain zerochain -total_supply 1000000.0e+18 -decimals 18 -signs_emission 2 -signs_total 3 -certs pvt.stagenet.root.0,pvt.stagenet.root.1,pvt.stagenet.root.2 (node: root-1)
2025-12-12T08:53:45.001519Z [info     ] exec_cli_command_debug         command_original='token_decl -token TCELL -chain zerochain -total_supply 1000000.0e+18 -decimals 18 -signs_emission 2 -signs_total 3 -certs pvt.stagenet.root.0,pvt.stagenet.root.1,pvt.stagenet.root.2 -net stagenet' command_split=['token_decl', '-token', 'TCELL', '-chain', 'zerochain', '-total_supply', '1000000.0e+18', '-decimals', '18', '-signs_emission', '2', '-signs_total', '3', '-certs', 'pvt.stagenet.root.0,pvt.stagenet.root.1,pvt.stagenet.root.2', '-net', 'stagenet'] container=cellframe-stage-node-1 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-1', 'sh', '-c', 'cellframe-node-cli token_decl -token TCELL -chain zerochain -total_supply 1000000.0e+18 -decimals 18 -signs_emission 2 -signs_total 3 -certs pvt.stagenet.root.0,pvt.stagenet.root.1,pvt.stagenet.root.2 -net stagenet'] shell_cmd='cellframe-node-cli token_decl -token TCELL -chain zerochain -total_supply 1000000.0e+18 -decimals 18 -signs_emission 2 -signs_total 3 -certs pvt.stagenet.root.0,pvt.stagenet.root.1,pvt.stagenet.root.2 -net stagenet'
2025-12-12T08:53:45.080988Z [info     ] Step 2/13: WaitStep           
2025-12-12T08:53:45.081128Z [info     ] Executing WaitStep. Dump: {'wait': '3s', 'datum': None, 'node': None, 'nodes': None, 'network': None, 'chain': None, 'timeout': 60, 'check_master': True, 'expected_count': None}
2025-12-12T08:53:45.081194Z [info     ] Waiting 3s (3s)               
2025-12-12T08:53:48.082713Z [info     ] Step 3/13: CLIStep            
2025-12-12T08:53:48.082958Z [info     ] CLI step: mempool proc -net stagenet -chain zerochain -datum 0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60 (node: root-1)
2025-12-12T08:53:48.093071Z [info     ] exec_cli_command_debug         command_original='mempool proc -net stagenet -chain zerochain -datum 0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60' command_split=['mempool', 'proc', '-net', 'stagenet', '-chain', 'zerochain', '-datum', '0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60'] container=cellframe-stage-node-1 full_cmd_list=['docker', 'exec', 'cellframe-stage-node-1', 'sh', '-c', 'cellframe-node-cli mempool proc -net stagenet -chain zerochain -datum 0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60'] shell_cmd='cellframe-node-cli mempool proc -net stagenet -chain zerochain -datum 0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60'
2025-12-12T08:53:48.162411Z [info     ] Step 4/13: WaitStep           
2025-12-12T08:53:48.162552Z [info     ] Executing WaitStep. Dump: {'wait': '2s', 'datum': None, 'node': None, 'nodes': None, 'network': None, 'chain': None, 'timeout': 60, 'check_master': True, 'expected_count': None}
2025-12-12T08:53:48.162621Z [info     ] Waiting 2s (2s)               
2025-12-12T08:53:50.164378Z [info     ] Step 5/13: WaitStep           
2025-12-12T08:53:50.164573Z [info     ] Executing WaitStep. Dump: {'wait': 'finalized', 'datum': '{{token_hash}}', 'node': 'root-1', 'nodes': None, 'network': None, 'chain': 'zerochain', 'timeout': 120, 'check_master': True, 'expected_count': None}
2025-12-12T08:53:50.164647Z [info     ] Waiting for condition: finalized
2025-12-12T08:53:50.164707Z [info     ] Waiting for datum 0x88D3BCDD9D5EEA... to be finalized
2025-12-12T08:53:50.164895Z [info     ] waiting_for_datum_in_mempool   chain=zerochain datum_hash=0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60 network=stagenet node=root-1 node_id=1
2025-12-12T08:53:50.288372Z [info     ] mempool_list_result            elapsed=0.12s looking_for=0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60 node_id=1 stdout_length=2177 stdout_preview='    \n        net: stagenet\n        chains: \n            \n                name: zerochain\n                removed: 0\n                datums: \n                    \n                        type: DATUM_TOKEN\n                        hash: 0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60\n                        created: \n                            time_stamp: 1765529625\n                            str: Fri, 12 Dec 2025 08:53:45 +0000\n\n                        Datum: \n                '
2025-12-12T08:53:50.288523Z [info     ] datum_found_in_mempool         datum=0x88D3BCDD9D5EEA elapsed=0.12s format=with_0x_prefix node_id=1
2025-12-12T08:55:30.479892Z [info     ] collected_node_logs_for_diagnosis container=cellframe-stage-node-1 lines=200 log_preview='\x1b[0;37;40m[12/12/25-08:54:11] [DBG] [dap_server] Listening socket 465 uuid 0x0000106D binded on /opt/cellframe-node/var/run/node_cli:438 accepted new connection from remote 485\n\x1b[1;32;40m[12/12/25-08:54:11] [INF] [dap_server] Connection accepted at "/opt/cellframe-node/var/run/node_cli", socket 485\n\x1b[0;37;40m[12/12/25-08:54:11] [DBG] [dap_cli_server] execute command=mempool_list;-net;stagenet;-chain;zerochain\n\x1b[0;32;40m[12/12/25-08:54:11] [ * ] [dap_chain_mempool] Filter removed: 0 records.\n\x1b[0;' node=root-1
2025-12-12T08:55:30.480139Z [error    ] Datum finalization failed: Datum stuck in mempool for 97.3s (expected verification within 96s)
2025-12-12T08:55:30.480245Z [error    ] WaitStep execution failed. Step: wait='finalized' datum='{{token_hash}}' node='root-1' nodes=None network=None chain='zerochain' timeout=120 check_master=True expected_count=None. Error: Datum finalization failed: Datum stuck in mempool for 97.3s (expected verification within 96s)
Step: wait='finalized' datum='{{token_hash}}' node='root-1' nodes=None network=None chain='zerochain' timeout=120 check_master=True expected_count=None
Context: {'datum_hash': '0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60', 'status': 'timeout_mempool', 'elapsed_time': 97.31251435999911, 'details': {'mempool_time': 97.31251406299998}}
2025-12-12T08:55:30.481147Z [error    ] Traceback (most recent call last):
  File "/home/olzh/demlabs/second/cellframe-node/tests/stage-env/src/scenarios/step/wait.py", line 66, in execute
    await self._execute_waiter(step, ctx)
  File "/home/olzh/demlabs/second/cellframe-node/tests/stage-env/src/scenarios/step/wait.py", line 230, in _execute_waiter
    await self._execute_datum_finalized_waiter(step, ctx)
  File "/home/olzh/demlabs/second/cellframe-node/tests/stage-env/src/scenarios/step/wait.py", line 183, in _execute_datum_finalized_waiter
    raise ScenarioExecutionError(
src.scenarios.executor.ScenarioExecutionError: Datum finalization failed: Datum stuck in mempool for 97.3s (expected verification within 96s)
Step: wait='finalized' datum='{{token_hash}}' node='root-1' nodes=None network=None chain='zerochain' timeout=120 check_master=True expected_count=None
Context: {'datum_hash': '0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60', 'status': 'timeout_mempool', 'elapsed_time': 97.31251435999911, 'details': {'mempool_time': 97.31251406299998}}

2025-12-12T08:55:30.482699Z [error    ] root_nodes_genesis_failed      error="Datum finalization failed: Datum stuck in mempool for 97.3s (expected verification within 96s)\nStep: wait='finalized' datum='{{token_hash}}' node='root-1' nodes=None network=None chain='zerochain' timeout=120 check_master=True expected_count=None\nContext: {'datum_hash': '0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60', 'status': 'timeout_mempool', 'elapsed_time': 97.31251435999911, 'details': {'mempool_time': 97.31251406299998}}" traceback='Traceback (most recent call last):\n  File "/home/olzh/demlabs/second/cellframe-node/tests/stage-env/src/network/manager.py", line 384, in start\n    ctx = await executor.execute_scenario(\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/home/olzh/demlabs/second/cellframe-node/tests/stage-env/src/scenarios/executor.py", line 499, in execute_scenario\n    await self._execute_steps(scenario.test.steps, ctx, section_defaults)\n  File "/home/olzh/demlabs/second/cellframe-node/tests/stage-env/src/scenarios/executor.py", line 567, in _execute_steps\n    await self._execute_steps(step.steps, ctx, group_defaults)\n  File "/home/olzh/demlabs/second/cellframe-node/tests/stage-env/src/scenarios/executor.py", line 583, in _execute_steps\n    await self.wait_executor.execute(step, ctx)\n  File "/home/olzh/demlabs/second/cellframe-node/tests/stage-env/src/scenarios/step/wait.py", line 66, in execute\n    await self._execute_waiter(step, ctx)\n  File "/home/olzh/demlabs/second/cellframe-node/tests/stage-env/src/scenarios/step/wait.py", line 230, in _execute_waiter\n    await self._execute_datum_finalized_waiter(step, ctx)\n  File "/home/olzh/demlabs/second/cellframe-node/tests/stage-env/src/scenarios/step/wait.py", line 183, in _execute_datum_finalized_waiter\n    raise ScenarioExecutionError(\nsrc.scenarios.executor.ScenarioExecutionError: Datum finalization failed: Datum stuck in mempool for 97.3s (expected verification within 96s)\nStep: wait=\'finalized\' datum=\'{{token_hash}}\' node=\'root-1\' nodes=None network=None chain=\'zerochain\' timeout=120 check_master=True expected_count=None\nContext: {\'datum_hash\': \'0x88D3BCDD9D5EEA614BC4BE3EC467CA6F87B2E9528095C97B6A5A4A7949125E60\', \'status\': \'timeout_mempool\', \'elapsed_time\': 97.31251435999911, \'details\': {\'mempool_time\': 97.31251406299998}}\n'
2025-12-12T08:55:30.482847Z [info     ] stopping_services              remove_images=False volumes=False
2025-12-12T08:55:32.357853Z [info     ] services_stopped              
