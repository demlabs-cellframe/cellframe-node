# Test: Wallet Address Operations  
# Test wallet address generation and retrieval

name: Wallet Address Operations
description: Test getting and verifying wallet addresses
tags: [e2e, wallet, address]
version: "1.0"

network:
  topology: default

includes:
  - common/networks/single_node.yml

defaults:
  node: node1
  wait: 1s

setup:
  - wait: 2s
  
  # Create test wallet
  - cli: wallet new -w test_addr_wallet

test:
  # Get wallet info with address
  - cli: wallet info -w test_addr_wallet -net stagenet
    save: wallet_info

check:
  # Verify address is present in wallet info
  - python: |
      wallet_info = ctx.get_variable('wallet_info')
      # Check that wallet info contains an address (either hex or base58)
      assert 'addr:' in wallet_info, "Wallet info should contain address"
      # Extract address from output (works for both formats)
      import re
      addr_match = re.search(r'addr:\s+(\S+)', wallet_info)
      assert addr_match, "Could not extract address from wallet info"
      addr = addr_match.group(1)
      assert len(addr) > 10, f"Address should not be empty, got: {addr}"
