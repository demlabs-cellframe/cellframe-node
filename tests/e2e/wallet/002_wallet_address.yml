# Test: Wallet Address Operations  
# Test wallet address generation and retrieval

name: Wallet Address Operations
description: Test getting and verifying wallet addresses
tags: [e2e, wallet, address]
version: "1.0"

network:
  topology: default

includes:
  - common/networks/single_node.yml

defaults:
  node: node1
  wait: 1s

setup:
  - wait: 2s
  
  # Create test wallet
  - cli: wallet new -w test_addr_wallet

test:
  # Get wallet info with address and extract it with validation
  - cli: wallet info -w test_addr_wallet -net stagenet
    extract_to:
      wallet_addr:
        type: wallet_address  # Auto-pattern + validation!

check:
  # Address is already validated by extract helper
  - python: |
      wallet_addr = ctx.get_variable('wallet_addr')
      # Built-in extractor already validated base58 format and checksum
      # Just verify length as an additional sanity check
      assert len(wallet_addr) >= 80, f"Address unexpectedly short: {len(wallet_addr)}"
      assert len(wallet_addr) <= 100, f"Address unexpectedly long: {len(wallet_addr)}"
