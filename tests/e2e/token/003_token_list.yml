# Test: Token Listing
# Verify token enumeration

name: Token List Test
description: Test listing available tokens
tags: [e2e, token, list, fast]
version: "1.0"

network:
  topology: default

includes:
  - common/networks/single_node.yml

setup:
  # Create test tokens
  - cli: token_decl -token LIST1 -total_supply 1000000 -decimals 18 -signs_total 1 -signs_emission 1
    save: list1_hash
  
  - wait_for_datum: "{{list1_hash}}"
  
  - cli: token_decl -token LIST2 -total_supply 2000000 -decimals 18 -signs_total 1 -signs_emission 1
    save: list2_hash
  
  - wait_for_datum: "{{list2_hash}}"

test:
  # Test: List tokens
  - cli: token list
    save: token_list

check:
  # Verify our tokens are in the list
  - python: |
      token_list = ctx.get_variable('token_list')
      assert 'LIST1' in token_list, "LIST1 should be in token list"
      assert 'LIST2' in token_list, "LIST2 should be in token list"
    description: "Created tokens appear in list"

