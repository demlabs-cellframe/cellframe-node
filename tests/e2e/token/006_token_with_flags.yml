# Test: Token with Multiple Flags
# Test creating token with various flag combinations

name: Token with Flags Test
description: Test creating tokens with different flag combinations
tags: [e2e, token, flags]
version: "1.0"

network:
  topology: default

includes:
  - common/create_test_cert.yml
  - common/networks/single_node.yml

setup:
  - wait: 3s

defaults:
  node: node1
  wait: 3s

test:
  # Test: Create token with specific flags
  - cli: token_decl -decimals 18 -signs_total 1 -signs_emission 1 -net stagenet -token FLAGTEST1 -total_supply 1000000 -flags ALL_ALLOWED_FOR_ALL
    wait: 8s
  # Test: Create another token
  - cli: token_decl -decimals 18 -signs_total 1 -signs_emission 1 -net stagenet -token FLAGTEST2 -total_supply 2000000
    wait: 8s
  # Wait for tokens to sync and propagate
  - wait: 10s
  
  # Verify both tokens exist
  - cli: token list -net stagenet
    save: token_list

check:
     
  - python: |
      tokens = ctx.get_variable('token_list')
      assert 'FLAGTEST1' in tokens, "FLAGTEST1 should be in list"
      assert 'FLAGTEST2' in tokens, "FLAGTEST2 should be in list"

