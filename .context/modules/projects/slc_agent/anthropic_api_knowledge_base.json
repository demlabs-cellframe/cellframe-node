{
  "name": "Anthropic API Knowledge Base",
  "description": "–ü–æ–ª–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ Anthropic Claude API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å SLC Agent v3.0",
  "version": "1.0.0",
  "created_at": "2025-01-27T19:30:00Z",
  "category": "knowledge_base",
  "tags": [
    "anthropic",
    "claude-4",
    "api",
    "integration",
    "slc-agent"
  ],
  "api_overview": {
    "base_url": "https://api.anthropic.com",
    "version": "2023-06-01",
    "authentication": {
      "method": "API Key",
      "header": "x-api-key",
      "env_var": "ANTHROPIC_API_KEY"
    },
    "primary_endpoint": "/v1/messages"
  },
  "models": {
    "claude_4": {
      "opus": {
        "model_id": "claude-opus-4-20250514",
        "alias": "claude-opus-4-0",
        "description": "–°–∞–º–∞—è –º–æ—â–Ω–∞—è –º–æ–¥–µ–ª—å Claude 4, –ª—É—á—à–∞—è –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á",
        "context_window": "200k tokens",
        "max_output": "8192 tokens"
      },
      "sonnet": {
        "model_id": "claude-sonnet-4-20250514",
        "alias": "claude-sonnet-4-0",
        "description": "–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏",
        "context_window": "200k tokens",
        "max_output": "8192 tokens",
        "recommended": true,
        "reason": "–õ—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è SLC Agent - –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–∏ —Ö–æ—Ä–æ—à–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏"
      }
    },
    "fallback_models": {
      "claude_3_5_sonnet": "claude-3-5-sonnet-20241022",
      "claude_3_5_haiku": "claude-3-5-haiku-20241022"
    }
  },
  "python_sdk": {
    "installation": "pip install anthropic",
    "import": "from anthropic import Anthropic, AsyncAnthropic",
    "basic_usage": {
      "sync": {
        "client_init": "client = Anthropic(api_key=os.environ.get('ANTHROPIC_API_KEY'))",
        "message_create": "message = client.messages.create(model='claude-sonnet-4-0', max_tokens=1024, messages=[{'role': 'user', 'content': 'Hello'}])"
      },
      "async": {
        "client_init": "client = AsyncAnthropic(api_key=os.environ.get('ANTHROPIC_API_KEY'))",
        "message_create": "message = await client.messages.create(model='claude-sonnet-4-0', max_tokens=1024, messages=[{'role': 'user', 'content': 'Hello'}])"
      }
    }
  },
  "messages_api": {
    "endpoint": "POST /v1/messages",
    "required_headers": {
      "x-api-key": "$ANTHROPIC_API_KEY",
      "anthropic-version": "2023-06-01",
      "content-type": "application/json"
    },
    "required_params": {
      "model": "–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–æ–¥–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: claude-sonnet-4-0)",
      "max_tokens": "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ (1-8192)",
      "messages": "–ú–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ–ª—è–º–∏ role –∏ content"
    },
    "optional_params": {
      "system": "–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è Claude",
      "temperature": "–°–ª—É—á–∞–π–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ (0.0-1.0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1.0)",
      "stream": "–ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –æ—Ç–≤–µ—Ç–∞ (true/false)",
      "tools": "–ú–∞—Å—Å–∏–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è tool use",
      "tool_choice": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤",
      "stop_sequences": "–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏",
      "metadata": "–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞ (user_id –∏ –¥—Ä.)"
    }
  },
  "conversation_management": {
    "stateless": "API –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ - –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é",
    "message_roles": [
      "user",
      "assistant"
    ],
    "message_structure": {
      "role": "user –∏–ª–∏ assistant",
      "content": "—Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –º–∞—Å—Å–∏–≤ content blocks"
    },
    "content_types": [
      {
        "type": "text",
        "text": "–¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ"
      },
      {
        "type": "image",
        "source": "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (base64 –∏–ª–∏ URL)"
      },
      {
        "type": "tool_use",
        "id": "ID –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞",
        "name": "–ò–º—è",
        "input": "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã"
      },
      {
        "type": "tool_result",
        "tool_use_id": "ID",
        "content": "–†–µ–∑—É–ª—å—Ç–∞—Ç"
      }
    ],
    "prefilling": "–ú–æ–∂–Ω–æ –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–∏—Ç—å –Ω–∞—á–∞–ª–æ –æ—Ç–≤–µ—Ç–∞ Claude —á–µ—Ä–µ–∑ assistant message"
  },
  "streaming": {
    "parameter": "stream: true",
    "response_format": "Server-Sent Events (SSE)",
    "event_types": [
      "message_start",
      "content_block_start",
      "content_block_delta",
      "content_block_stop",
      "message_delta",
      "message_stop"
    ],
    "python_example": {
      "basic": "stream = client.messages.create(stream=True, ...)",
      "helper": "async with client.messages.stream(...) as stream: async for text in stream.text_stream: print(text)"
    }
  },
  "tool_use": {
    "overview": "Claude –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π",
    "types": {
      "client_tools": "–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞",
      "server_tools": "–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö Anthropic (–Ω–∞–ø—Ä–∏–º–µ—Ä, web search)"
    },
    "workflow": [
      "1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ tools",
      "2. Claude —Ä–µ—à–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç",
      "3. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∫–ª–∏–µ–Ω—Ç–æ–º",
      "4. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —á–µ—Ä–µ–∑ tool_result",
      "5. Claude —Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç"
    ],
    "tool_definition": {
      "name": "–ò–º—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (1-64 —Å–∏–º–≤–æ–ª–∞)",
      "description": "–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏",
      "input_schema": "JSON Schema –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤",
      "type": "custom (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)"
    },
    "tool_choice_options": {
      "auto": "Claude —Å–∞–º —Ä–µ—à–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã",
      "any": "Claude –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç",
      "tool": "–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞",
      "none": "–ó–∞–ø—Ä–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤"
    }
  },
  "error_handling": {
    "status_codes": {
      "400": "BadRequestError - –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å",
      "401": "AuthenticationError - –ø—Ä–æ–±–ª–µ–º—ã —Å API –∫–ª—é—á–æ–º",
      "403": "PermissionDeniedError - –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞",
      "404": "NotFoundError - —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω",
      "422": "UnprocessableEntityError - –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ",
      "429": "RateLimitError - –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤",
      "500+": "InternalServerError - –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"
    },
    "retry_logic": {
      "default_retries": 2,
      "retry_conditions": [
        "connection errors",
        "408",
        "409",
        "429",
        "500+"
      ],
      "backoff": "exponential"
    },
    "python_exceptions": [
      "anthropic.APIConnectionError",
      "anthropic.RateLimitError",
      "anthropic.APIStatusError",
      "anthropic.APIError"
    ]
  },
  "best_practices": {
    "model_selection": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ claude-sonnet-4-0 –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é –º–æ–¥–µ–ª—å",
    "context_management": "–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ä–∞–∑–º–µ—Ä–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤",
    "system_prompts": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ system –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è",
    "streaming": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ streaming –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤",
    "error_handling": "–†–µ–∞–ª–∏–∑—É–π—Ç–µ proper retry logic –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫",
    "rate_limits": "–£—á–∏—Ç—ã–≤–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ exponential backoff",
    "security": "–•—Ä–∞–Ω–∏—Ç–µ API –∫–ª—é—á–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è"
  },
  "integration_patterns": {
    "conversational_agent": {
      "description": "–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞",
      "implementation": "–ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ messages –≤ —Å–ø–∏—Å–∫–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏"
    },
    "tool_agent": {
      "description": "–ê–≥–µ–Ω—Ç —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤",
      "implementation": "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ tools –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ tool_use/tool_result —Ü–∏–∫–ª–æ–≤"
    },
    "streaming_chat": {
      "description": "–†–µ–∞–ª—Ç–∞–π–º —á–∞—Ç —Å –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–µ–π",
      "implementation": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ stream=True –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ SSE —Å–æ–±—ã—Ç–∏–π"
    }
  },
  "slc_agent_integration": {
    "primary_use_cases": [
      "–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤ Telegram",
      "–ê–Ω–∞–ª–∏–∑ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
      "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞–¥–∞—á",
      "–ü–µ—Ä–µ—Å–ø—Ä–∞—à–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏",
      "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π"
    ],
    "recommended_config": {
      "model": "claude-sonnet-4-0",
      "max_tokens": 1024,
      "temperature": 0.7,
      "stream": true,
      "system_prompt": "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —Ä–æ–ª—å SLC –∞–≥–µ–Ω—Ç–∞"
    },
    "context_optimization": {
      "token_counting": "client.beta.messages.count_tokens()",
      "context_compression": "–°–∂–∞—Ç–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É",
      "smart_truncation": "–£–º–Ω–æ–µ –æ–±—Ä–µ–∑–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤–∞–∂–Ω–æ–≥–æ"
    }
  },
  "navigation_system": {
    "purpose": "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç",
    "recovery_path": ".context/manifest.json",
    "current_file": ".context/modules/projects/slc_agent/anthropic_api_knowledge_base.json",
    "file_role": "PROJECT_TEMPLATE",
    "related_files": [
      ".context/manifest.json"
    ],
    "quick_navigation": {
      "üè† –ì–ª–∞–≤–Ω–∞—è": ".context/manifest.json - –≥–ª–∞–≤–Ω—ã–π –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã",
      "üõ†Ô∏è CLI": ".context/tools/scripts/slc_cli.py - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è"
    },
    "usage_hint": "./slc info modules/projects/slc_agent/anthropic_api_knowledge_base.json –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏",
    "ai_context": "–§–∞–π–ª –°–õ–ö —Å–∏—Å—Ç–µ–º—ã: anthropic_api_knowledge_base.json"
  }
}