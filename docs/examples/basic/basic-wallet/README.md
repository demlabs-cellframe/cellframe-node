# üí∞ Basic Wallet - –ü—Ä–æ—Å—Ç–æ–π –∫–æ—à–µ–ª–µ–∫ –¥–ª—è CellFrame

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞–º–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ CellFrame.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–ª—é—á–µ–π
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ—à–µ–ª—å–∫–∞** –∏–∑ —Ñ–∞–π–ª–∞
- ‚úÖ **–ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞** —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤** –¥—Ä—É–≥–æ–º—É –∞–¥—Ä–µ—Å—É
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –∫–æ—à–µ–ª—å–∫–∞
- ‚úÖ **–≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç** –∫–æ—à–µ–ª—å–∫–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
basic-wallet/
‚îú‚îÄ‚îÄ CMakeLists.txt          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.c             # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ wallet.c           # –õ–æ–≥–∏–∫–∞ –∫–æ—à–µ–ª—å–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ transaction.c      # –†–∞–±–æ—Ç–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îú‚îÄ‚îÄ wallet.h           # API –∫–æ—à–µ–ª—å–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ transaction.h      # API —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ wallet.cfg         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ test_wallet.c      # –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ api.md             # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ examples.md        # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–∏–º–µ—Ä–∞
cd examples/basic/basic-wallet

# –°–±–æ—Ä–∫–∞
mkdir build && cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
make

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
./basic-wallet create my_wallet

# –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞
./basic-wallet balance my_wallet

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
./basic-wallet send my_wallet <recipient_address> 100.0 KEL
```

## üíª –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ—à–µ–ª—å–∫–∞

```c
// include/wallet.h
typedef struct basic_wallet {
    char name[64];                    // –ò–º—è –∫–æ—à–µ–ª—å–∫–∞
    char address[128];                // –ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞
    dap_enc_key_t *private_key;       // –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
    dap_pkey_t *public_key;           // –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á

    // –ë–∞–ª–∞–Ω—Å—ã –ø–æ —Ç–æ–∫–µ–Ω–∞–º
    GHashTable *balances;             // –¢–∞–±–ª–∏—Ü–∞ –±–∞–ª–∞–Ω—Å–æ–≤

    // –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
    GList *transactions;              // –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
    bool encrypted;                   // –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
    char *password;                   // –ü–∞—Ä–æ–ª—å (–µ—Å–ª–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω)
} basic_wallet_t;
```

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ—à–µ–ª—å–∫–æ–º

#### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞

```c
basic_wallet_t *wallet_create(const char *name, const char *password) {
    basic_wallet_t *wallet = calloc(1, sizeof(basic_wallet_t));
    strncpy(wallet->name, name, sizeof(wallet->name) - 1);

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–≤–æ–π –ø–∞—Ä—ã
    wallet->private_key = dap_enc_key_generate(DAP_ENC_KEY_TYPE_SIG_ECDSA, 256);
    wallet->public_key = dap_enc_key_get_pkey(wallet->private_key);

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
    size_t addr_size = 0;
    uint8_t *addr_bytes = dap_enc_key_get_address(wallet->public_key, &addr_size);
    dap_enc_base58_encode(addr_bytes, addr_size, wallet->address);

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
    wallet->balances = g_hash_table_new_full(g_str_hash, g_str_equal, free, free);
    wallet->transactions = NULL;

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
    wallet->encrypted = (password != NULL);
    if (password) {
        wallet->password = strdup(password);
    }

    return wallet;
}
```

#### –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—à–µ–ª—å–∫–∞

```c
basic_wallet_t *wallet_load(const char *filename, const char *password) {
    // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –∫–æ—à–µ–ª—å–∫–∞
    FILE *file = fopen(filename, "rb");
    if (!file) {
        return NULL;
    }

    // –ß—Ç–µ–Ω–∏–µ –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    // ...

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
    basic_wallet_t *wallet = wallet_create_from_data(data);

    fclose(file);
    return wallet;
}
```

#### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞

```c
int wallet_save(basic_wallet_t *wallet, const char *filename) {
    // –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–∞
    size_t data_size;
    uint8_t *data = wallet_serialize(wallet, &data_size);

    // –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
    if (wallet->encrypted) {
        data = wallet_encrypt_data(data, &data_size, wallet->password);
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª
    FILE *file = fopen(filename, "wb");
    if (!file) {
        free(data);
        return -1;
    }

    fwrite(data, 1, data_size, file);
    fclose(file);
    free(data);

    return 0;
}
```

## üí∏ –†–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞

```c
void wallet_print_balance(basic_wallet_t *wallet) {
    printf("üí∞ –ë–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞ %s:\n", wallet->name);
    printf("üìç –ê–¥—Ä–µ—Å: %s\n", wallet->address);
    printf("\n");

    if (g_hash_table_size(wallet->balances) == 0) {
        printf("üì≠ –ö–æ—à–µ–ª–µ–∫ –ø—É—Å—Ç\n");
        return;
    }

    GHashTableIter iter;
    gpointer key, value;
    g_hash_table_iter_init(&iter, wallet->balances);

    while (g_hash_table_iter_next(&iter, &key, &value)) {
        const char *ticker = (const char *)key;
        uint256_t *balance = (uint256_t *)value;

        char balance_str[64];
        uint256_to_str(balance, balance_str, sizeof(balance_str));

        printf("ü™ô %s: %s\n", ticker, balance_str);
    }
}
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

```c
int wallet_send_tokens(basic_wallet_t *wallet,
                      const char *recipient_addr,
                      const char *ticker,
                      uint256_t amount,
                      const char *network) {

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
    uint256_t *current_balance = g_hash_table_lookup(wallet->balances, ticker);
    if (!current_balance || uint256_compare(amount, *current_balance) > 0) {
        fprintf(stderr, "‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤\n");
        return -1;
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ Compose API
    compose_config_t config = {
        .net_name = network,
        .url_str = "http://rpc.cellframe.net",
        .port = 8081,
        .enc = false
    };

    json_object *tx = dap_tx_create_compose(
        network,           // —Å–µ—Ç—å
        ticker,           // —Ç–æ–∫–µ–Ω
        uint256_to_str(&amount), // —Å—É–º–º–∞
        "0.001",         // –∫–æ–º–∏—Å—Å–∏—è
        recipient_addr,  // –ø–æ–ª—É—á–∞—Ç–µ–ª—å
        &wallet->addr_from, // –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å
        config.url_str,
        config.port,
        NULL
    );

    if (!tx) {
        fprintf(stderr, "‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏\n");
        return -1;
    }

    // –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞
    // ...

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
    uint256_sub(current_balance, current_balance, amount);

    return 0;
}
```

## üìä –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

```c
typedef struct wallet_transaction {
    char tx_hash[128];               // –•—ç—à —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    char timestamp[32];              // –í—Ä–µ–º—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    char type[16];                   // –¢–∏–ø (send/receive)
    char ticker[16];                 // –¢–æ–∫–µ–Ω
    uint256_t amount;                // –°—É–º–º–∞
    char address[128];               // –ê–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è/–ø–æ–ª—É—á–∞—Ç–µ–ª—è
    char network[32];                // –°–µ—Ç—å
} wallet_transaction_t;
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏

```c
void wallet_print_history(basic_wallet_t *wallet) {
    printf("üìú –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∫–æ—à–µ–ª—å–∫–∞ %s:\n", wallet->name);
    printf("%-20s %-10s %-8s %-15s %-25s %-15s\n",
           "–î–∞—Ç–∞", "–¢–∏–ø", "–¢–æ–∫–µ–Ω", "–°—É–º–º–∞", "–ê–¥—Ä–µ—Å", "–•—ç—à");

    for (GList *iter = wallet->transactions; iter; iter = iter->next) {
        wallet_transaction_t *tx = (wallet_transaction_t *)iter->data;

        char amount_str[32];
        uint256_to_str(&tx->amount, amount_str, sizeof(amount_str));

        printf("%-20s %-10s %-8s %-15s %-25s %-15.10s...\n",
               tx->timestamp, tx->type, tx->ticker, amount_str,
               tx->address, tx->tx_hash);
    }
}
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (config/wallet.cfg)

```ini
[wallet]
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
default_network = KelVPN
auto_backup = true
backup_interval = 3600

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
encryption = true
key_derivation = argon2
password_min_length = 8

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏
rpc_timeout = 30
max_retries = 3
confirmations_required = 6

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ UI
show_fiat_values = true
fiat_currency = USD
update_rates_interval = 300
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```c
typedef struct wallet_config {
    char *default_network;
    bool auto_backup;
    int backup_interval;
    bool encryption;
    char *key_derivation;
    int password_min_length;
    int rpc_timeout;
    int max_retries;
    int confirmations_required;
} wallet_config_t;

wallet_config_t *wallet_config_load(const char *filename) {
    wallet_config_t *config = calloc(1, sizeof(wallet_config_t));

    // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ INI —Ñ–∞–π–ª–∞
    // (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
    config->default_network = strdup("KelVPN");
    config->auto_backup = true;
    config->backup_interval = 3600;
    config->encryption = true;
    // ...

    return config;
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit-—Ç–µ—Å—Ç—ã

```c
// tests/test_wallet.c
#include "wallet.h"
#include "dap_test.h"

void test_wallet_creation() {
    basic_wallet_t *wallet = wallet_create("test_wallet", NULL);
    dap_assert(wallet != NULL, "Wallet creation should succeed");
    dap_assert(strlen(wallet->address) > 0, "Wallet should have address");
    dap_assert(wallet->private_key != NULL, "Wallet should have private key");

    wallet_free(wallet);
}

void test_wallet_save_load() {
    basic_wallet_t *original = wallet_create("test_wallet", "password");

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    int save_result = wallet_save(original, "test_wallet.dat");
    dap_assert(save_result == 0, "Wallet save should succeed");

    // –ó–∞–≥—Ä—É–∑–∫–∞
    basic_wallet_t *loaded = wallet_load("test_wallet.dat", "password");
    dap_assert(loaded != NULL, "Wallet load should succeed");
    dap_assert(strcmp(original->address, loaded->address) == 0,
               "Loaded wallet should have same address");

    wallet_free(original);
    wallet_free(loaded);

    // –û—á–∏—Å—Ç–∫–∞
    unlink("test_wallet.dat");
}

int main() {
    dap_print_module_name("Basic Wallet Tests");

    test_wallet_creation();
    test_wallet_save_load();

    return 0;
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

```bash
#!/bin/bash
# tests/integration_test.sh

echo "Running wallet integration tests..."

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
./basic-wallet create test_wallet

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è
if [ ! -f "test_wallet.dat" ]; then
    echo "Wallet file not created"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
./basic-wallet balance test_wallet

# –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Å mock RPC)
# ...

echo "Integration tests passed!"
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ—à–µ–ª—å–∫–∞

```c
uint8_t *wallet_encrypt_data(uint8_t *data, size_t *size, const char *password) {
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ –∏–∑ –ø–∞—Ä–æ–ª—è
    uint8_t key[32];
    dap_enc_key_from_pass(password, key, sizeof(key));

    // –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    dap_enc_aes_key_t *aes_key = dap_enc_aes_key_from_data(key, sizeof(key));
    size_t encrypted_size = *size + 16; // –î–ª—è padding
    uint8_t *encrypted = malloc(encrypted_size);

    dap_enc_aes_encrypt_cbc(aes_key, data, *size, encrypted);

    *size = encrypted_size;
    return encrypted;
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤

```c
bool wallet_validate_address(const char *address, const char *network) {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∞–¥—Ä–µ—Å–∞
    if (strlen(address) < 30 || strlen(address) > 40) {
        return false;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ (base58)
    for (const char *p = address; *p; p++) {
        if (!strchr("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz", *p)) {
            return false;
        }
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º—ã
    // ...

    return true;
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—à–µ–ª—å–∫–∞

```c
typedef struct wallet_stats {
    int total_transactions;
    int successful_transactions;
    int failed_transactions;
    uint256_t total_sent;
    uint256_t total_received;
    time_t first_transaction;
    time_t last_transaction;
} wallet_stats_t;

wallet_stats_t *wallet_get_stats(basic_wallet_t *wallet) {
    wallet_stats_t *stats = calloc(1, sizeof(wallet_stats_t));

    for (GList *iter = wallet->transactions; iter; iter = iter->next) {
        wallet_transaction_t *tx = (wallet_transaction_t *)iter->data;

        stats->total_transactions++;

        if (strcmp(tx->type, "send") == 0) {
            uint256_add(&stats->total_sent, &stats->total_sent, &tx->amount);
        } else if (strcmp(tx->type, "receive") == 0) {
            uint256_add(&stats->total_received, &stats->total_received, &tx->amount);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
        // ...
    }

    return stats;
}
```

## üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```c
void print_usage() {
    printf("Basic Wallet for CellFrame DAP SDK\n");
    printf("Usage:\n");
    printf("  basic-wallet create <name> [password]    - Create new wallet\n");
    printf("  basic-wallet load <file> [password]      - Load wallet from file\n");
    printf("  basic-wallet balance <name>              - Show wallet balance\n");
    printf("  basic-wallet send <name> <address> <amount> <ticker> [network]\n");
    printf("                                           - Send tokens\n");
    printf("  basic-wallet history <name>              - Show transaction history\n");
    printf("  basic-wallet export <name> <file>        - Export wallet to file\n");
    printf("  basic-wallet import <file> <name>        - Import wallet from file\n");
    printf("  basic-wallet help                        - Show this help\n");
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

```c
int main(int argc, char *argv[]) {
    if (argc < 2) {
        print_usage();
        return 1;
    }

    const char *command = argv[1];

    if (strcmp(command, "create") == 0) {
        if (argc < 3) {
            fprintf(stderr, "Usage: basic-wallet create <name> [password]\n");
            return 1;
        }

        const char *password = (argc > 3) ? argv[3] : NULL;
        return cmd_create_wallet(argv[2], password);

    } else if (strcmp(command, "load") == 0) {
        // ...
    } else if (strcmp(command, "balance") == 0) {
        // ...
    }

    fprintf(stderr, "Unknown command: %s\n", command);
    print_usage();
    return 1;
}
```

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ NFT

```c
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è NFT
typedef struct wallet_nft {
    char token_id[128];
    char collection[64];
    char metadata_uri[256];
    char image_uri[256];
    char description[512];
} wallet_nft_t;

// –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å NFT
GList *wallet_get_nfts(basic_wallet_t *wallet);
int wallet_send_nft(basic_wallet_t *wallet, const char *nft_id,
                   const char *recipient_addr, const char *network);
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å exchanges

```c
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂—É
typedef struct exchange_order {
    char exchange_name[64];
    char pair[16];              // "KEL/CELL"
    char type[8];               // "buy"/"sell"
    uint256_t amount;
    uint256_t price;
    char status[16];            // "open"/"filled"/"cancelled"
} exchange_order_t;

// –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∏—Ä–∂–∞–º–∏
int wallet_place_order(basic_wallet_t *wallet, exchange_order_t *order);
int wallet_cancel_order(basic_wallet_t *wallet, const char *order_id);
GList *wallet_get_orders(basic_wallet_t *wallet, const char *exchange);
```

### –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º

```c
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
typedef struct user_profile {
    char username[64];
    basic_wallet_t *wallet;
    wallet_config_t *config;
    GList *sessions;            // –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
} user_profile_t;

// –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏
user_profile_t *user_create(const char *username);
int user_add_wallet(user_profile_t *user, basic_wallet_t *wallet);
basic_wallet_t *user_get_wallet(user_profile_t *user, const char *wallet_name);
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- `wallet_create()` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
- `wallet_load()` - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—à–µ–ª—å–∫–∞ –∏–∑ —Ñ–∞–π–ª–∞
- `wallet_save()` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ –≤ —Ñ–∞–π–ª
- `wallet_get_balance()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Ç–æ–∫–µ–Ω–∞
- `wallet_send_tokens()` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
- `wallet_get_history()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é](docs/api.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö.

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –ü—Ä–æ–±–ª–µ–º–∞: "Failed to create wallet"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DAP SDK –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.

#### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid password"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º (–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤).

#### –ü—Ä–æ–±–ª–µ–º–∞: "Network connection failed"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å RPC —É–∑–ª–∞.

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
export DAP_LOG_LEVEL=DEBUG
./basic-wallet balance my_wallet

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª
./basic-wallet balance my_wallet 2>&1 | tee wallet.log
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **[Simple Transaction](../simple-transaction/)** - –ò–∑—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
2. **[Network Client](../network-client/)** - –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ç—å—é
3. **[Advanced Wallet](../../advanced/advanced-wallet/)** - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

## ü§ù –í–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞:

- **üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫**
- **‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
- **üìö –£–ª—É—á—à–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**
- **üß™ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã**

–°–º. [CONTRIBUTING.md](https://github.com/cellframe/libdap/blob/master/CONTRIBUTING.md) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π GNU General Public License v3.0.

**üéâ –ì–æ—Ç–æ–≤—ã —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏? –ù–∞—á–Ω–∏—Ç–µ —Å —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞!**



