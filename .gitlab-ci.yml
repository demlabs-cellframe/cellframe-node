variables:
    GIT_SUBMODULE_STRATEGY: recursive

stages:
    - build
    - pack
    - notify

cellframe-node_x86_64-linux-gnu:
    tags:
     - ci-polygon
    
    image: ubuntu:20.04
    stage: build
    
    before_script: /opt/buildtools/prepare_environment.sh x86_64-linux-gnu 
    script: ./prod_build/build.sh

pack-deb:
  stage: pack
  needs: [cellframe-node_x86_64-linux-gnu]
  image: ubuntu:20.04

  script: ./prod_build/pack.sh

notify:
  stage: notify
  needs: [pack-deb]
  script:
    - echo "We are done"